# 节卡双臂机器人协作夹持长物体操作流程

## 1. 末端夹具设计与安装
- 为左右机械臂末端安装合适的夹具（如夹爪），确保夹具能稳定夹持目标物体。
- 夹具需能同步开合，夹持力足够。

## 2. 工具坐标系（TCP）标定
- 使用 `robot_set_tool_offset` 设置每个夹具的工具坐标系。
- 标定方法：
  - 测量夹具中心点相对于法兰盘的偏移（位置和姿态）。
  - 设置到机器人控制器。

## 3. 负载参数设置
- 用 `robot_set_tool_payload` 设置每个夹具的负载参数（质量和质心）。
- 负载参数影响运动精度和安全性。

## 4. 夹持点与姿态规划
- 根据物体尺寸，计算左右夹具的夹持点坐标和姿态。
- 用 `CartesianPose` 表示每个夹具的目标位置和方向。
- 夹持点应在物体两端，姿态需与物体轴线一致。

## 5. 双臂同步运动规划
- 使用 `robot_run_multi_movj` 或 `robot_run_multi_movl`，让两臂同时运动到夹持点。
- 可用 `kine_inverse` 计算关节角度，`kine_forward` 验证末端位置。
- 运动参数（速度、加速度）需一致，保证同步。

## 6. 夹持动作同步
- 两臂到位后，控制夹具闭合，实现夹持。
- 可用 `robot_set_io` 控制夹具开合（如夹爪气缸/电机）。
- 建议加延时或状态检测，确保夹持动作完成。

## 7. 协作搬运/移动
- 搬运物体时，规划双臂的同步轨迹，保持夹持状态。
- 运动过程中保持夹具闭合，避免物体滑落。
- 可实时监控力/扭矩（如有力控传感器），防止受力不均。

## 8. 安全与碰撞检测
- 设置合适的碰撞等级（`set_collision_level`），防止夹持或搬运过程中发生碰撞。
- 用 `robot_is_in_error` 实时监控机器人状态。

## 9. 异常处理
- 若夹持失败或发生异常，及时释放夹具、停止运动，并清除错误。
- 可用 `motion_abort` 停止运动，`clear_error` 清除故障。

---

## 典型操作流程示例

1. 标定夹具TCP
2. 设置负载参数
3. 计算夹持点和姿态
4. 双臂同步运动到夹持点
5. 闭合夹具夹持物体
6. 协作搬运/移动到目标位置
7. 松开夹具
8. 复位机械臂

---

## 相关SDK接口参考
- `robot_set_tool_offset`：设置工具坐标系
- `robot_set_tool_payload`：设置末端负载
- `robot_run_multi_movj` / `robot_run_multi_movl`：双臂同步运动
- `kine_inverse` / `kine_forward`：运动学计算
- `robot_set_io`：控制夹具开合
- `set_collision_level`：设置碰撞检测等级
- `robot_is_in_error`：错误状态检测
- `motion_abort`：紧急停止
- `clear_error`：清除故障

---

## 注意事项
- 夹持点和姿态需根据物体实际尺寸和形状规划。
- 夹具同步开合，防止夹持不均。
- 运动前后需检测夹具和物体状态，确保安全。
- 运动参数（速度、加速度）需合理设置，防止冲击。
- 夹持和搬运过程中实时监控机器人状态，及时处理异常。

---

> 如需具体代码示例或运动规划算法，请补充夹具类型、物体尺寸、夹持点等细节。
