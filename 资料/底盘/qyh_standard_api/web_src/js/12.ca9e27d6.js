(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"013f":function(t,e,s){"use strict";s.r(e);s("ab43"),s("a732"),s("b7ef");var i=s("d192"),a=s("2f62"),n=s("1c16"),o=s("6821"),r=s.n(o),l=s("b5ae"),c=s("e4ef"),u=s("f226"),d=s("a39b"),g=s("bf4c"),p=s("d5bc"),M=s("6825"),m=s("1369"),h=s("d046"),y={name:"Login",inject:["doSetLanguage","reload"],components:{ContextMenu:M.a,MessageDialog:p.a,PinCodeInput:g.a},data:()=>({userName:"",password:"",loading:!1,isPassword:!0,selectedTab:"tabAccount",loadMatrix:!1,winWidth:600,winHeight:300,letters:Array(256).join("1").split(""),matrixIntervalId:0,isShowLoginForm:!0}),validations:{password:{required:l.required},userName:{required:l.required}},computed:{...Object(a.f)(["companyInformation","partner"]),...Object(a.d)(["isDisplayLogo","isNotPartnerBeta"]),ipAddress:{get(){return this.$store.state.ipAddress},set(t){this.setIpAddress(t)}},httpPort:{get(){return this.$store.state.httpPort},set(t){this.setHttpPort(+t)}},wsPort:{get(){return this.$store.state.wsPort},set(t){this.setWsPort(+t)}},currentLang(){let t=m.a.getLanguage();return Object(c.L)(t)},isShowCopyright(){return this.isDisplayLogo&&this.isNotPartnerBeta}},watch:{loadMatrix(t,e){t?this.startMatrix():this.stopMatrix()},selectedTab(t,e){this.changedTab(t)}},methods:{...Object(a.e)(["setIpAddress","setHttpPort","setWsPort"]),...Object(a.c)("srp",["getMapList"]),async changedTab(t){this.$nextTick(()=>{"tabAccount"===t?this.$refs.inputUserName.focus():this.$refs.inputPincode.setDefaultFocus()})},accountLogin:Object(n.a)(async function(){this.$v.$touch(),this.$v.password.$error?this.$notify({message:this.$t("text.inputPassword"),timeout:3e3,type:"negative",position:"top"}):(this.userName=this.userName.trim(),this.password=this.password.trim(),await this.login(this.userName,r()(this.password)))},500),pincodeLogin:Object(n.a)(async function(){if(!this.$refs.inputPincode.checkInput())return void this.$notify({message:this.$t("text.illegalPincode"),timeout:3e3,type:"negative",position:"top"});let t=this.$refs.inputPincode.getInput(),e=""+t.pin1+t.pin2+t.pin3+t.pin4,s=await Object(d.x)("pincode",e);null!=s?await this.login(s.username,s.passwd):this.$notify({message:this.$t("text.errorPincode"),timeout:3e3,type:"negative",position:"top"})},500),async login(t,e){if("fms"!==t){if(!this.ipAddress)return this.$notify({message:this.$t("text.illegalIP"),timeout:3e3,type:"negative",position:"top"}),void this.reload();if(!this.loading){if(this.loading=!0,this.ipAddress&&this.wsPort&&t&&e)try{if(!await Object(u.c)(this.ipAddress,this.wsPort,t,e))return this.loading=!1,this.$root.$emit("login",c.i.Normal,!1),this.isNotPartnerBeta||this.isShowLoginForm||(this.isShowLoginForm=!0),void(this.loadMatrix=!1);this.$store.commit("setToken",!0),this.$store.commit("setManualLogout",!1),await Object(c.Q)(500),await Object(u.b)();let s=await Object(d.x)("username",t);if(null==s)return await this.$refs.messageDlg.doShowMessage({title:this.$t("label.error"),message:this.$t("text.failGetAccountId")}),void(this.loading=!1);this.$store.commit("srp/setAccount",s),localStorage.setItem(i.a.User,JSON.stringify({user:s.username,pwd:s.passwd})),this.$store.getters["srp/isLockedState"]&&!this.$store.getters["srp/isLockedByMyself"]&&this.$notify({message:this.$t("text.systemUnavailable"),timeout:3e3,type:"warning",position:"top"}),this.$root.$emit("login",c.i.Normal,!0),this.getMapList();let a=await Object(d.D)("ui.home_page","homePage"),n=a.config.value_range?a.value:"homePage";const o=h.a[1].children.some(t=>"homePage"===t.path)?"homePage":"manualcontrol";n="homePage"!==n&&this.$store.getters["srp/isMoreThanUser"]?n:o,this.$router.push(n)}catch(t){this.$notify({message:t.message,timeout:3e3,type:"negative",position:"top"})}this.loading=!1}}else this.$notify({message:this.$t("text.invalidAccountName"),timeout:3e3,type:"negative",position:"top"})},async openCtxMenu(t){t.stopPropagation();let e=[];for(let t of Array.from(Object(c.M)()))e.push({value:t.value,name:t.label,isActive:!1});let s=null;try{s=await this.$refs.ctxMenu.openContextMenu(e)}catch(t){}null!=s&&this.doSetLanguage(s.value)},startMatrix(){this.matrixIntervalId>0&&this.stopMatrix(),this.matrixIntervalId=setInterval(this.draw,30)},stopMatrix(){this.matrixIntervalId<=0||(clearInterval(this.matrixIntervalId),this.matrixIntervalId=0)},onClickMatrix(){this.loadMatrix=!0},draw(){let t=document.getElementById("canvasMatrix");if(!t)return;let e=t.getContext("2d");e.fillStyle="rgba(0,0,0,.05)",e.fillRect(0,0,this.winWidth,this.winHeight),e.fillStyle="#09F";let s="10101010101010";this.letters.map((e,i)=>{let a=s.charAt(Math.round(100*Math.random())%14),n=10*i;t.getContext("2d").fillText(a,n,e),this.letters[i]=e>758+1e4*Math.random()?0:e+10}),t=null},onKeyDown(t){this.loadMatrix&&(this.loadMatrix=!1)},async initData(){this.$debug?(!this.ipAddress&&this.setIpAddress("10.10.21.221"),!this.httpPort&&this.setHttpPort(80),!this.wsPort&&this.setWsPort(5002),this.userName="dev",this.password="_sr_dev_"):this.setIpAddress(window.location.hostname);const t=new URLSearchParams(window.location.search);if(t.has("partner")){var e;let s=t.get("partner");s="BETA"===s?s:atob(s);const i=["STD_DEV","STD_ADMIN","BETA","STD_USER"],a=i.includes(this.partner),n={STD_DEV:()=>{this.userName="dev",this.password="_sr_dev_"},STD_ADMIN:()=>{this.userName=this.password="admin"},BETA:()=>{this.userName=this.password="admin"},STD_USER:()=>{this.userName="user",this.password="user"}};if(null===(e=n[s])||void 0===e||e.call(n),this.$store.commit("partnerSet",s),!a&&i.includes(this.partner)){this.isShowLoginForm=!1,this.onClickMatrix();const t=await Object(d.x)("username",this.userName);t&&await this.login(t.username,t.passwd)}}}},async created(){await this.initData()},mounted:function(){this.loadMatrix&&this.startMatrix(),document.addEventListener("keydown",this.onKeyDown)},updated(){if(this.loadMatrix){let t=document.getElementById("canvasMatrix");this.winWidth=t.width=document.body.clientWidth,this.winHeight=t.height=document.body.clientHeight,t=null}},beforeDestroy(){this.loadMatrix=!1,this.stopMatrix(),document.removeEventListener("keydown",this.onKeyDown),this.stopMatrix()}},x=(s("1df3"),s("2877")),N=s("9c40"),D=s("0016"),w=s("eb85"),f=s("429b"),b=s("7460"),I=s("adad"),j=s("823b"),T=s("27f9"),A=s("d9b2"),z=s("f449"),v=s("eebe"),C=s.n(v),k=Object(x.a)(y,function(){var t=this,e=t._self._c;return e("div",{staticClass:"backgound full-width",attrs:{id:"background"}},[e("q-btn",{staticStyle:{position:"absolute",top:"10px",right:"10px"},attrs:{outline:"","no-caps":"",unelevatedclass:"",color:"transparent"},on:{click:t.openCtxMenu}},[e("label",{staticClass:"q-mr-sm text_main_grey_style"},[t._v(t._s(t.currentLang))]),e("q-icon",{staticClass:"std_expand"}),e("context-menu",{ref:"ctxMenu",attrs:{"is-context-menu":!1}})],1),e("div",{staticClass:"flex flex-center",staticStyle:{"min-height":"100vh"}},[t.isShowLoginForm?e("div",{staticClass:"column"},[t.isDisplayLogo?e("div",{staticClass:"customer_logo"},[1===t.companyInformation.loginCompanyLogoAndNameFlag||3===t.companyInformation.loginCompanyLogoAndNameFlag?[t.$debug?e("img",{attrs:{src:s("f409"),alt:"loginLogo.svg"}}):e("img",{attrs:{src:"static/source/companyInformation/loginLogo.svg",alt:"loginLogo.svg"}})]:t._e(),t.companyInformation.loginCompanyLogoAndNameFlag>=2?e("h1",{style:"font-size:"+t.companyInformation.loginCompanyNameFontSize+"px"},[t._v("\n          "+t._s(t.companyInformation.name)+"\n        ")]):t._e()],2):t._e(),e("div",{directives:[{name:"touch-hold",rawName:"v-touch-hold.noMouse",value:t.onClickMatrix,expression:"onClickMatrix",modifiers:{noMouse:!0}}],staticClass:"self-center non-selectable cursor-pointer",staticStyle:{"font-size":"24px","font-weight":"bold",color:"#5a5d74","margin-top":"24px"},on:{dblclick:t.onClickMatrix}},[t._v("\n        Matrix\n        "),e("q-separator",{staticStyle:{height:"3px"},attrs:{color:"light-blue"}})],1),e("div",{staticStyle:{width:"400px","margin-top":"48px"}},[e("q-tabs",{staticClass:"no-scroll bg-grey-1 text-grey-9",attrs:{animated:"","no-caps":"","narrow-indicator":"","active-bg-color":"white","active-color":"blue",align:"center"},model:{value:t.selectedTab,callback:function(e){t.selectedTab=e},expression:"selectedTab"}},[e("q-tab",{attrs:{"no-caps":"",default:"",name:"tabAccount"}},[e("div",{staticStyle:{"font-size":"14px"}},[t._v(t._s(t.$t("label.accountLogin")))])]),e("q-tab",{attrs:{name:"tabPincode"}},[e("div",{staticStyle:{"font-size":"14px"}},[t._v(t._s(t.$t("label.pincode")))])])],1),e("q-tab-panels",{attrs:{dense:"","indicator-color":"",animated:""},model:{value:t.selectedTab,callback:function(e){t.selectedTab=e},expression:"selectedTab"}},[e("q-tab-panel",{staticStyle:{margin:"0px",padding:"0px"},attrs:{name:"tabAccount"}},[e("div",{staticClass:"q-mt-lg q-ml-xl q-mr-xl"},[e("div",{staticClass:"group"},[t.$debug?[e("label",{staticClass:"text-grey-5"},[t._v(t._s(t.$t("label.ipAddress")))]),e("q-input",{staticClass:"q-my-sm",attrs:{outlined:"",dense:"",placeholder:t.$t("label.ipAddress")},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.accountLogin.apply(null,arguments)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"q-mr-sm login-bg-icon",attrs:{name:"mdi-ip-outline",size:"xs"}})]},proxy:!0}],null,!1,469900464),model:{value:t.ipAddress,callback:function(e){t.ipAddress="string"==typeof e?e.trim():e},expression:"ipAddress"}}),e("label",{staticClass:"text-grey-5"},[t._v("HTTP(S) PORT")]),e("q-input",{staticClass:"q-my-sm",attrs:{outlined:"",dense:"",min:1,max:65535,placeholder:"HTTP(S) Port"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.accountLogin.apply(null,arguments)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"q-mr-sm login-bg-icon",attrs:{name:"mdi-numeric-8-circle-outline",size:"xs"}})]},proxy:!0}],null,!1,907597800),model:{value:t.httpPort,callback:function(e){t.httpPort=t._n(e)},expression:"httpPort"}}),e("label",{staticClass:"text-grey-5"},[t._v("WEBSOCKET PORT")]),e("q-input",{staticClass:"q-my-sm",attrs:{outlined:"",dense:"",min:1,max:65535,placeholder:"WebSocket Port"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.accountLogin.apply(null,arguments)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"q-mr-sm login-bg-icon",attrs:{name:"mdi-numeric-5-circle-outline",size:"xs"}})]},proxy:!0}],null,!1,772379205),model:{value:t.wsPort,callback:function(e){t.wsPort=t._n(e)},expression:"wsPort"}})]:t._e(),e("label",{staticClass:"text-grey-5"},[t._v(t._s(t.$t("label.username")))]),e("q-input",{ref:"inputUserName",staticClass:"q-mt-sm",attrs:{outlined:"",dense:"",autofocus:"","float-label":t.$t("label.username"),error:t.$v.userName.$error,placeholder:t.$t("text.inputUserName"),autocomplete:"username",name:"username"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.accountLogin.apply(null,arguments)},blur:t.$v.userName.$touch},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"std_icon_user q-mr-sm"})]},proxy:!0}],null,!1,3874647688),model:{value:t.userName,callback:function(e){t.userName="string"==typeof e?e.trim():e},expression:"userName"}})],2),e("div",{staticClass:"group"},[e("label",{staticClass:"text-grey-5"},[t._v(t._s(t.$t("label.password")))]),e("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",dense:"",type:t.isPassword?"password":"text",error:t.$v.password.$error,placeholder:t.$t("text.inputPassword"),autocomplete:"current-password",name:"password"},on:{blur:t.$v.password.$touch,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.accountLogin.apply(null,arguments)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{staticClass:"std_icon_pwd q-mr-sm"})]},proxy:!0},{key:"append",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPassword?"visibility_off":"visibility"},on:{click:function(e){t.isPassword=!t.isPassword}}})]},proxy:!0}],null,!1,4116948977),model:{value:t.password,callback:function(e){t.password="string"==typeof e?e.trim():e},expression:"password"}})],1),e("q-btn",{staticClass:"full-width q-mt-md q-mb-xl text-white text-h7 loginBtn",attrs:{"no-caps":"",unelevated:"",loading:t.loading},on:{click:t.accountLogin}},[t._v("\n                "+t._s(t.$t("button.login"))+"\n                "),e("span",{attrs:{slot:"loading"},slot:"loading"},[e("q-spinner-ios",{staticClass:"on-left"}),t._v("\n                  "+t._s(t.$t("label.logining"))+"\n                ")],1)])],1)]),e("q-tab-panel",{staticStyle:{margin:"0px",padding:"0px"},attrs:{name:"tabPincode"}},[e("div",{staticClass:"q-mt-xl q-ml-xl q-mr-xl"},[e("div",{staticClass:"group"},[e("pin-code-input",{ref:"inputPincode",attrs:{editable:!0},on:{finishInput:t.pincodeLogin}}),e("q-btn",{staticClass:"full-width q-mt-md q-mb-xl text-white text-h7 loginBtn",attrs:{"no-caps":"",unelevated:"",loading:t.loading},on:{click:t.pincodeLogin}},[t._v("\n                  "+t._s(t.$t("button.login"))+"\n                  "),e("span",{attrs:{slot:"loading"},slot:"loading"},[e("q-spinner-ios",{staticClass:"on-left"}),t._v("\n                    "+t._s(t.$t("label.logining"))+"\n                  ")],1)])],1)])])],1)],1)]):t._e(),t.isShowCopyright?e("label",{staticClass:"fixed-bottom full-width q-mb-md text-grey-6",staticStyle:{"text-align":"center","font-size":"16px"}},[t._v("\n      Copyright Â© "+t._s(t.companyInformation.year)+" "+t._s(t.companyInformation.name)+" Co.,Ltd. All rights\n      reserved.\n    ")]):t._e()]),t.loadMatrix?e("div",{staticStyle:{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%"},on:{touchstart:t.onKeyDown}},[e("canvas",{staticStyle:{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",opacity:"0.8"},attrs:{id:"canvasMatrix"}})]):t._e(),e("message-dialog",{ref:"messageDlg"})],1)},[],!1,null,"07351207",null);e.default=k.exports;C()(k,"components",{QBtn:N.a,QIcon:D.a,QSeparator:w.a,QTabs:f.a,QTab:b.a,QTabPanels:I.a,QTabPanel:j.a,QInput:T.a,QSpinnerIos:A.a}),C()(k,"directives",{TouchHold:z.a})},"1df3":function(t,e,s){"use strict";s("e045")},e045:function(t,e,s){},f409:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjEiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MSA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzJfMikiPgo8cGF0aCBkPSJNMzUuODIxOCAzOS4xMDgyQzM1LjU1MDQgMzkuNDU3NiAzNS4yMDM1IDM5Ljc0IDM0LjgwNzYgMzkuOTM0MkMzNC40MTE3IDQwLjEyODMgMzMuOTc3MSA0MC4yMjkgMzMuNTM2OSA0MC4yMjg2SDI1LjE2NDZMMzEuOTYxMyA0OUgxMi43NDQzQzEyLjMwMzggNDguOTk5NyAxMS44NjkxIDQ4Ljg5ODQgMTEuNDczMiA0OC43MDM2QzExLjA3NzMgNDguNTA4OSAxMC43MzA2IDQ4LjIyNTkgMTAuNDU5NCA0Ny44NzYxTDAgMzQuMzg1N0wxMC40NTk0IDIwLjg5MThDMTAuNzMwOCAyMC41NDI0IDExLjA3NzYgMjAuMjYgMTEuNDczNSAyMC4wNjU4QzExLjg2OTQgMTkuODcxNyAxMi4zMDQgMTkuNzcxIDEyLjc0NDMgMTkuNzcxM0gxOC42ODg0TDcuMzU5NDIgMzQuMzg1N0wxNS41NDQxIDQ0Ljk1MTJDMTUuODE0OSA0NS4zMDE2IDE2LjE2MTUgNDUuNTg1IDE2LjU1NzUgNDUuNzc5OEMxNi45NTM1IDQ1Ljk3NDUgMTcuMzg4NCA0Ni4wNzU2IDE3LjgyOSA0Ni4wNzUxSDIzLjc3MzJMMTYuOTg2NyAzNy4zMDcySDI4LjQ0MTlDMjguODgyNCAzNy4zMDY5IDI5LjMxNzEgMzcuMjA1NSAyOS43MTMgMzcuMDEwOEMzMC4xMDg4IDM2LjgxNjEgMzAuNDU1NSAzNi41MzMxIDMwLjcyNjggMzYuMTgzMkwzNC4zODYgMzEuNDYwN0gxNi45OTM1TDI1LjE3ODIgMjAuODkxOEMyNS40NTAyIDIwLjU0MyAyNS43OTcxIDIwLjI2MDkgMjYuMTkyOSAyMC4wNjY5QzI2LjU4ODcgMTkuODcyOCAyNy4wMjMgMTkuNzcxNyAyNy40NjMxIDE5Ljc3MTNIMzUuODM4OEwyOS4wMzg3IDExSDQ4LjI1NTdDNDguNjk2NyAxMS4wMDA1IDQ5LjEzMTggMTEuMTAyIDQ5LjUyODIgMTEuMjk2NkM0OS45MjQ2IDExLjQ5MTMgNTAuMjcxOSAxMS43NzQyIDUwLjU0NCAxMi4xMjM5TDYxIDI1LjYxNDNMNTAuNTQ0IDM5LjEwODJDNTAuMjcxNyAzOS40NTc0IDQ5LjkyNDMgMzkuNzM5OCA0OS41Mjc4IDM5LjkzMzlDNDkuMTMxNCA0MC4xMjggNDguNjk2NCA0MC4yMjg4IDQ4LjI1NTcgNDAuMjI4Nkg0Mi4zMTE2TDUzLjY0MDYgMjUuNjE0M0w0NS40NTU5IDE1LjA0ODhDNDUuMTg0NiAxNC42OTkgNDQuODM3OSAxNC40MTYgNDQuNDQyIDE0LjIyMTNDNDQuMDQ2MiAxNC4wMjY2IDQzLjYxMTUgMTMuOTI1MiA0My4xNzEgMTMuOTI0OUgzNy4yMjM0TDQ0LjAyMDEgMjIuNjkyOEgzMi41NTgxQzMyLjExNzYgMjIuNjkzNCAzMS42ODMxIDIyLjc5NDggMzEuMjg3MiAyMi45ODk1QzMwLjg5MTQgMjMuMTg0MyAzMC41NDQ2IDIzLjQ2NzEgMzAuMjczMiAyMy44MTY3TDI2LjYxNCAyOC41MzkzSDQ0LjAwNjVMMzUuODIxOCAzOS4xMDgyWiIgZmlsbD0iIzAwOTlGRiIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzJfMiI+CjxyZWN0IHdpZHRoPSI2MSIgaGVpZ2h0PSI2MCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K"}}]);