(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{2715:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTYiIGhlaWdodD0iOTYiIHZpZXdCb3g9IjAgMCA5NiA5NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzJfNSkiPgo8cGF0aCBkPSJNMCAwSDk2Vjk2SDBWMFoiIGZpbGw9IiMwMDk5RkYiLz4KPHBhdGggZD0iTTUzLjEyMzggNTUuNDA5N0M1Mi44ODggNTUuNzEzMSA1Mi41ODY3IDU1Ljk1ODUgNTIuMjQyNyA1Ni4xMjcxQzUxLjg5ODcgNTYuMjk1NyA1MS41MjExIDU2LjM4MzEgNTEuMTM4NiA1Ni4zODI4SDQzLjg2NDNMNDkuNzY5NyA2NEgzMy4wNzI5QzMyLjY5MDIgNjMuOTk5OCAzMi4zMTI1IDYzLjkxMTcgMzEuOTY4NSA2My43NDI2QzMxLjYyNDYgNjMuNTczNSAzMS4zMjMzIDYzLjMyNzggMzEuMDg3NyA2My4wMjRMMjIgNTEuMzA4NkwzMS4wODc3IDM5LjU5MDNDMzEuMzIzNSAzOS4yODY5IDMxLjYyNDggMzkuMDQxNSAzMS45Njg4IDM4Ljg3MjlDMzIuMzEyOCAzOC43MDQzIDMyLjY5MDQgMzguNjE2OSAzMy4wNzI5IDM4LjYxNzJIMzguMjM3NUwyOC4zOTQyIDUxLjMwODZMMzUuNTA1NiA2MC40ODM5QzM1Ljc0MDggNjAuNzg4MiAzNi4wNDE5IDYxLjAzNDMgMzYuMzg2IDYxLjIwMzVDMzYuNzMwMSA2MS4zNzI2IDM3LjEwNzkgNjEuNDYwMyAzNy40OTA4IDYxLjQ1OTlINDIuNjU1NEwzNi43NTg5IDUzLjg0NTdINDYuNzExOEM0Ny4wOTQ1IDUzLjg0NTQgNDcuNDcyMiA1My43NTc0IDQ3LjgxNjIgNTMuNTg4M0M0OC4xNjAxIDUzLjQxOTIgNDguNDYxNCA1My4xNzM1IDQ4LjY5NyA1Mi44Njk3TDUxLjg3NjQgNDguNzY4NUgzNi43NjQ5TDQzLjg3NjIgMzkuNTkwM0M0NC4xMTI0IDM5LjI4NzQgNDQuNDEzOSAzOS4wNDI0IDQ0Ljc1NzcgMzguODczOEM0NS4xMDE2IDM4LjcwNTMgNDUuNDc5IDM4LjYxNzYgNDUuODYxNCAzOC42MTcySDUzLjEzODZMNDcuMjMwMyAzMUg2My45MjcxQzY0LjMxMDIgMzEuMDAwNSA2NC42ODgzIDMxLjA4ODUgNjUuMDMyNyAzMS4yNTc2QzY1LjM3NzEgMzEuNDI2NyA2NS42Nzg5IDMxLjY3MjMgNjUuOTE1MyAzMS45NzZMNzUgNDMuNjkxNEw2NS45MTUzIDU1LjQwOTdDNjUuNjc4NyA1NS43MTMgNjUuMzc2OCA1NS45NTgyIDY1LjAzMjQgNTYuMTI2OEM2NC42ODggNTYuMjk1NCA2NC4zMSA1Ni4zODI5IDYzLjkyNzEgNTYuMzgyOEg1OC43NjI1TDY4LjYwNTggNDMuNjkxNEw2MS40OTQ0IDM0LjUxNjFDNjEuMjU4OCAzNC4yMTIzIDYwLjk1NzUgMzMuOTY2NSA2MC42MTM2IDMzLjc5NzRDNjAuMjY5NiAzMy42MjgzIDU5Ljg5MTkgMzMuNTQwMyA1OS41MDkyIDMzLjU0MDFINTQuMzQxNkw2MC4yNDcgNDEuMTU0M0g1MC4yODgyQzQ5LjkwNTUgNDEuMTU0OCA0OS41Mjc5IDQxLjI0MjkgNDkuMTg0IDQxLjQxMkM0OC44NCA0MS41ODExIDQ4LjUzODggNDEuODI2NyA0OC4zMDMgNDIuMTMwM0w0NS4xMjM2IDQ2LjIzMTVINjAuMjM1MUw1My4xMjM4IDU1LjQwOTdaIiBmaWxsPSJ3aGl0ZSIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzJfNSI+CjxyZWN0IHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K"},"3ea2":function(t,e,s){"use strict";s("8d7c")},"8d7c":function(t,e,s){},a9c3:function(t,s,i){"use strict";i.r(s);i("f665"),i("7d54");var a=i("2c28"),n=i("33aa"),o=i("2f62"),r=i("8163"),l=(i("d866"),i("910d"),i("ab43"),i("a732"),i("ce11")),c=i("c64e"),d=i("e4ef"),u=i("a39b"),h=i("fca8"),m=i("f226"),p=i("a56b"),g=i("32e0"),b={name:"MissionReports",components:{HeaderItem:g.a},data(){return{opened:!1,pagination:{rowsPerPage:15},columns:[{name:"ID",label:"ID",field:"no",required:!0,align:"center",sortable:!0},{name:"missionName",label:this.$t("label.missionName"),field:"name",required:!0,align:"center",sortable:!1},{name:"mapName",label:this.$t("label.mapName"),field:"mapName",required:!0,align:"center",sortable:!1},{name:"result",label:this.$t("label.result"),field:"result",required:!0,align:"center",sortable:!1},{name:"step",label:this.$t("label.errorStep"),field:"curStepId",required:!0,align:"center",sortable:!1},{name:"startTime",label:this.$t("label.startTime"),field:"startTimestamp",required:!0,align:"center",sortable:!1},{name:"finishTime",label:this.$t("label.finishTime"),field:"finishTimestamp",required:!0,align:"center",sortable:!1},{name:"error",label:this.$t("label.errorInfo"),field:"errorCode",required:!0,align:"center",sortable:!1}]}},computed:{queueMissionList(){return this.$store.getters["srp/queueMissionList"]},missionList(){return this.$store.state.srp.missionList}},async mounted(){},methods:{onOkay(){this.opened=!1},resultStr(t){return(t=parseInt(t))===l.b.TaskResult.TASK_RESULT_OK?this.$t("label.success"):t===l.b.TaskResult.TASK_RESULT_FAILED?this.$t("label.failed"):t===l.b.TaskResult.TASK_RESULT_CANCELED?this.$t("button.cancel"):this.$t("label.NA")},errorStep(t){if(t.result===l.b.TaskResult.TASK_RESULT_OK)return"";let e=this.getMissionStep(t.curStepId,this.getMission(t.id));if(null==e)return;let s=e.step,i=e.mission,a="";switch(s.stepInfo.stepType){case p.f.MOVE_TO_STATION:{let t=s.stepInfo.stationId;a=this.$t("label.moveTo")+` #${t}`;break}case p.f.ACTION:a=Object(h.g)(s.stepInfo.actionId,s.stepInfo.actionParameter,s.stepInfo.actionParameter1)}return""!==a&&t.name!==i&&(a+=` @${i}`),a},errorStr(t){if(t.result!==l.b.TaskResult.TASK_RESULT_FAILED)return"";let e=this.getMissionStep(t.curStepId,this.getMission(t.id));if(null==e)return;let s=e.step,i="",a=t.errorCode;switch(s.stepInfo.stepType){case p.f.MOVE_TO_STATION:i=m.d.moveTaskFailedStr(a);break;case p.f.ACTION:i=m.d.actionTaskFailedStr(a)}return i},datetimeStr:t=>Object(d.F)(t),getMissionStep(t,e){if(null==e)return null;let s=Object.keys(e.body);if(e.body.hasOwnProperty(t))return{step:e.body[t],mission:e.name};for(let i of Array.from(s)){let s=e.body[i];if(s.stepInfo.stepType===p.f.CHILD_MISSION){let e=this.getMission(s.stepInfo.missionId);if(null==e)continue;return this.getMissionStep(t,e)}}return null},getMission(t){for(let e of Array.from(this.missionList))if(e.id===t)return e;return null}}},_=i("2877"),y=i("24e8"),M=i("f09f"),f=i("eaac"),v=i("bd08"),S=i("db86"),w=i("9c40"),N=i("eebe"),$=i.n(N),I=Object(_.a)(b,function(){var t=this,e=t._self._c;return e("q-dialog",{attrs:{"no-backdrop-dismiss":""},on:{"escape-key":t.onOkay},model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[e("q-card",{staticStyle:{width:"1260px","max-width":"1600px"}},[e("div",{staticClass:"q-mx-md q-mt-md"},[e("header-item",{attrs:{title:t.$t("label.missionReport")},on:{close:t.onOkay}}),e("div",{staticClass:"no-scroll q-mt-md"},[e("q-table",{staticClass:"sticky-header-table no-shadow",attrs:{columns:t.columns,data:t.queueMissionList,"row-key":"ID","rows-per-page-options":[10,15,30,0],"table-header-class":"text_small_grey_style background_light_grey","table-header-style":"height: 28px;","rows-per-page-label":t.$t("label.rowPerPage"),pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"body",fn:function(s){return 5===s.row.state?e("q-tr",{class:parseInt(s.row.result)>1?"text-main_red_style":"text_main_grey_style",attrs:{props:s}},[e("q-td",{key:"ID",attrs:{props:s}},[e("div",[t._v(t._s(s.row.no))])]),e("q-td",{key:"missionName",attrs:{props:s}},[e("div",[t._v(t._s(s.row.name))])]),e("q-td",{key:"mapName",attrs:{props:s}},[e("div",[t._v(t._s(s.row.mapName))])]),e("q-td",{key:"result",attrs:{props:s}},[e("div",[t._v(t._s(t.resultStr(s.row.result)))])]),e("q-td",{key:"step",attrs:{props:s}},[e("div",[t._v(t._s(t.errorStep(s.row)))])]),e("q-td",{key:"startTime",attrs:{props:s}},[e("div",[t._v(t._s(t.datetimeStr(s.row.startTimestamp)))])]),e("q-td",{key:"finishTime",attrs:{props:s}},[e("div",[t._v(t._s(t.datetimeStr(s.row.finishTimestamp)))])]),e("q-td",{key:"error",attrs:{props:s}},[e("div",[t._v(t._s(t.errorStr(s.row)))])])],1):t._e()}}],null,!0)}),e("div",{staticClass:"float-right q-my-md"},[e("q-btn",{staticClass:"no-shadow",staticStyle:{width:"140px"},attrs:{"no-caps":"",unelevated:"",color:"primary",size:"10px;"},on:{click:t.onOkay}},[t._v(t._s(t.$t("label.closed")))])],1)],1)],1)])],1)},[],!1,null,"2a03a043",null),k=I.exports;$()(I,"components",{QDialog:y.a,QCard:M.a,QTable:f.a,QTr:v.a,QTd:S.a,QBtn:w.a});var q={name:"StdButton",data:()=>({curState:d.b.STATE_NONE}),props:{passiveIcon:{type:String,default:""},activeIcon:{type:String,default:""},disableIcon:{type:String,default:""},iconClass:{type:String,default:""},size:{type:String,default:"16px"},label:{type:[Number,String],default:""},outline:{type:Boolean,default:!0},round:{type:Boolean,default:!1},flat:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},classStyle:{type:String,default:""},tips:{type:String,default:""}},computed:{iconName(){if(this.disable)return this.disableIcon;let t=this.passiveIcon;switch(this.curState){case d.b.STATE_NONE:break;case d.b.STATE_MOUSE_OVER:case d.b.STATE_SELECTED:t=this.activeIcon}return t},isActiveState(){return this.curState!==d.b.STATE_NONE},textColor(){let t="grey-4";if(this.disable)return t="grey-3",t;switch(this.curState){case d.b.STATE_NONE:break;case d.b.STATE_MOUSE_OVER:case d.b.STATE_SELECTED:t="primary"}return t}},mounted(){},methods:{onMouseOver(){this.curState=d.b.STATE_MOUSE_OVER},onMouseOut(){this.curState=d.b.STATE_NONE}}},O=i("0016"),x=i("05c0"),C=Object(_.a)(q,function(){var t=this,e=t._self._c;return e("q-btn",{class:t.classStyle+(t.isActiveState?"text_main_blue_style":"text_main_grey_style"),attrs:{"no-caps":"",unelevated:"",round:t.round,outline:t.outline,label:t.label,size:t.size,disable:t.disable,color:"transparent"},on:{mouseover:t.onMouseOver,mouseout:t.onMouseOut}},[e("q-icon",{class:t.iconName+" "+t.iconClass}),""!==t.tips?e("q-tooltip",[t._v("\n    "+t._s(t.tips)+"\n  ")]):t._e()],1)},[],!1,null,"0a2058c0",null),D=C.exports;$()(C,"components",{QBtn:w.a,QIcon:O.a,QTooltip:x.a});var T={name:"MissionList",components:{StdButton:D,MissionReports:k},inject:["doAsk"],data(){return{isMobile:this.$q.platform.is.mobile,curMissionStepId:"",curMissionStep:"",curMission:null,mapStations:[],enableOrderMissionNo:[]}},mounted:async function(){this.$root.$on("login",this.onLogin),await this.loadMapStations(this.$store.getters["srp/mapName"]),await this.loadMission(this.$store.state.srp.systemState.runningMission.curMissionId)},beforeDestroy(){this.$root.$off("login",this.onLogin)},computed:{...Object(o.f)("srp",["account"]),...Object(o.d)("srp",["isMoreThanUser","isDeploy","isMissionPending","isMissionPaused","isMissionRunning","curMissionId","hasRunningState","hasPausedState"]),missionList(){return this.$store.getters["srp/queueMissionList"]},curMissionNO(){return this.$store.state.srp.systemState.runningMission.no},curExecMissionStep(){return this.$store.state.srp.systemState.runningMission.curStepId},loopTimeInfo(){return this.$store.getters["srp/curRepeatTime"]<=0?"":` [${this.$t("label.loop")}: ${this.$store.getters["srp/totalRepeatTime"]}, ${this.$t("label.finished")}: ${this.$store.getters["srp/curRepeatTime"]}]`},hasPendingMission(){return this.missionList.some(t=>t.state===l.b.Mission.MissionStatus.MISSION_STATUS_PENDING)},continueMissionAble(){return this.isMissionRunning?this.hasPausedState:this.hasPendingMission&&this.isMissionPending},pauseMissionAble(){return this.isMissionRunning&&!this.hasPausedState}},watch:{curExecMissionStep(t,e){this.updateMissionStep(t)},curMissionNO(t,e){this.loadMapStations(this.$store.getters["srp/mapName"]),this.loadMission(this.$store.state.srp.systemState.runningMission.curMissionId),this.removeEnableOrderMission(t)},curMissionId(t,e){this.loadMission(t)}},methods:{async loadCurrentMission(t){let e=this.$store.state.srp.missionList,s=!1;for(let i=0;i<e.length;i++)t.id===e[i].id&&(s=!0);if(!s)return void this.$notify({message:this.$t("text.unavailableMission",{missionName:t.name}),timeout:3e3,type:"negative",position:"top"});let i=await Object(u.R)(t.id),a=await Object(u.Q)(t.mapName);try{await this.$router.replace({path:"/taskedit",query:{isEditable:0,stations:JSON.stringify(a),missionDat:JSON.stringify(i)}})}catch(t){}},async loadMapStations(t){if(""===t||"NO_MAP"===t)return;let e=await Object(u.O)(t,!1);null!==e&&(this.mapStations=e.data.station,this.updateMissionStep(this.curExecMissionStep))},async loadMission(t){t<=0||(this.curMission=await Object(u.R)(t),this.updateMissionStep(this.curExecMissionStep))},onLogin(t,e){e&&this.$store.dispatch("srp/getRunMissionList")},showOrderButtons(t){return t.state===l.b.Mission.MissionStatus.MISSION_STATUS_PENDING&&this.getIndexOfOrderMission(t.no)>=0},missionIconName(t){let e="std_clock";switch(t.state){case l.b.Mission.MissionStatus.MISSION_STATUS_FINISHED:e=t.result===l.b.TaskResult.TASK_RESULT_OK?"std_okay":t.result===l.b.TaskResult.TASK_RESULT_CANCELED?"std_back":"std_failed";break;case l.b.Mission.MissionStatus.MISSION_STATUS_PAUSED:case l.b.Mission.MissionStatus.MISSION_STATUS_RUNNING:e="std_running"}return e},isCurMissionFinished:t=>t===l.b.Mission.MissionStatus.MISSION_STATUS_FINISHED,isCurMissionRunning:t=>t===l.b.Mission.MissionStatus.MISSION_STATUS_RUNNING,isCurMissionPause:t=>t===l.b.Mission.MissionStatus.MISSION_STATUS_PAUSED,isCurMissionPending:t=>t===l.b.Mission.MissionStatus.MISSION_STATUS_PENDING,async changedorderButtonState(t,e){if(t.preventDefault(),t.stopPropagation(),e.state!==l.b.Mission.MissionStatus.MISSION_STATUS_PENDING)return;if(!await this.checkUserAvailable(e))return;let s=this.getIndexOfOrderMission(e.no);s<0?this.enableOrderMissionNo.push(e.no):this.enableOrderMissionNo.splice(s,1)},getIndexOfOrderMission(t){for(let e=0;e<this.enableOrderMissionNo.length;e++)if(this.enableOrderMissionNo[e]===t)return e;return-1},removeEnableOrderMission(t){let e=this.getIndexOfOrderMission(t);e>=0&&this.enableOrderMissionNo.splice(e,1)},async continueMission(){try{await c.a.continueMission()}catch(t){this.$notify({message:this.$t("text.failContinueMission")+t.message,timeout:3e3,type:"negative",position:"top"})}},async pauseMission(){try{await c.a.pause()}catch(t){this.$notify({message:this.$t("text.pauseMissionFailed")+t.message,timeout:3e3,type:"negative",position:"top"})}},async stopMission(){try{let t=this.$store.getters["srp/curMissionNo"];return await c.a.stop(t),!0}catch(t){return this.$notify({message:this.$t("text.stopMissionFailed")+": "+t.message,timeout:3e3,type:"negative",position:"top"}),!1}},async cancelMission(t,e){null==t||t.preventDefault(),null==t||t.stopPropagation();try{await c.a.stop(e),this.removeEnableOrderMission(e)}catch(t){this.$notify({message:this.$t("text.failCancelMission")+": "+t.message,timeout:3e3,type:"negative",position:"top"})}},showMissionReport(){this.$refs.missionReport.opened=!0},missionInfo:t=>t.state===l.b.Mission.MissionStatus.MISSION_STATUS_FINISHED?Object(d.F)(t.finishTimestamp,"yyyy-MM-dd hh:mm:ss"):"",enableReorder:t=>t.state===l.b.Mission.MissionStatus.MISSION_STATUS_PENDING,enableCancel(t){return!this.isCurMissionFinished(t.state)&&!this.isCurMissionPause(t.state)&&!this.isCurMissionRunning(t.state)},disableMoveUp(t){let e=this.allPendingMissions();return this.findIndex(t,e)<=0},disableMoveDown(t){let e=this.allPendingMissions();return this.findIndex(t,e)>=e.length-1},async onMissionUp(t,e){t.preventDefault(),t.stopPropagation();let s=this.allPendingMissions(),i=this.findIndex(e,s);if(i<1)return;let a=s[i],n=s[i-1];s[i-1]=a,s[i]=n,s.reverse(),await c.a.reorderMissions(s)},async onMissionDown(t,e){t.preventDefault(),t.stopPropagation();let s=this.allPendingMissions(),i=this.findIndex(e,s);if(i>s.length-2)return;let a=s[i],n=s[i+1];s[i]=n,s[i+1]=a,s.reverse(),await c.a.reorderMissions(s)},allPendingMissions(){let t=[];return this.missionList.forEach(e=>{e.state===l.b.Mission.MissionStatus.MISSION_STATUS_PENDING&&t.push(e)}),t},findIndex(t,e){let s=-1;for(let i=0;i<e.length;i++)if(e[i].no===t){s=i;break}return s},findStation(t){for(let e=0;e<this.mapStations.length;e++)if(this.mapStations[e].id===t)return this.mapStations[e];return null},updateMissionStep(t){if(this.curMissionStep="",""===t)return;if(!this.isMissionPaused&&!this.isMissionRunning)return;if(null==this.curMission)return;let e=this.curMission.body;if(!e.hasOwnProperty(t))return;let s=e[t].stepInfo;this.curMissionStep=Object(h.m)(s,this.mapStations),this.curMissionStep+=this.loopTimeInfo},async clearMissionReport(){await this.doAsk({title:this.$t("label.warning"),question:this.$t("label.clearAllReports")+"?"})&&(await Object(u.Ab)(),this.$notify({message:this.$t("label.clearAllReports")+this.$t("label.success")+","+this.$t("text.needToRestartToTakeEffect"),timeout:3e3,type:"positive",position:"top"}))},async checkUserAvailable(t={}){if(this.isMoreThanUser)return!0;const e=await Object(u.S)(t.no);return e?!(!this.account||e.user_name!==this.account.username)||(this.$notify({message:this.$t("text.insufficientPermissions"),timeout:3e3,type:"negative",position:"top"}),!1):(this.$notify({message:this.$t("text.unavailableMission",{missionName:t.name}),timeout:3e3,type:"negative",position:"top"}),!1)},async clearAllPendingMission(){if(!(this.hasPendingMission&&await this.doAsk({title:this.$t("label.warning"),question:this.$t("button.clearAllPendingMission")+"?"})))return;const t=this.missionList.filter(({state:t})=>t===l.b.Mission.MissionStatus.MISSION_STATUS_PENDING);(await Promise.all(t.map(({no:t})=>this.cancelMission(null,t)))).every(t=>t)&&this.$notify({message:this.$t("button.clearAllPendingMission")+this.$t("label.success"),timeout:3e3,type:"positive",position:"top"})}}},A=i("1c1c"),L=i("66e5"),j=i("0170"),P=i("eb85"),E=i("d847"),z=i("4074"),R=Object(_.a)(T,function(){var t=this,e=t._self._c;return e("div",[e("q-list",{attrs:{highlight:""}},[e("q-item",[e("q-item-label",{staticClass:"text_small_light_grey",attrs:{caption:""}},[t._v("\n        "+t._s(t.$t("label.missionQueue"))+"\n      ")])],1),e("q-separator",{attrs:{inset:"",color:"grey-3"}}),t.isMissionRunning||t.isMissionPaused?[e("q-item",[e("q-item-label",{staticClass:"float-right text_small_blue_style q-my-sm",staticStyle:{"font-weight":"bold",display:"block",overflow:"hidden","text-overflow":"ellipsis","white-space":"wrap"},attrs:{caption:""}},[t._v("\n          "+t._s(t.curMissionStep)+"\n        ")])],1),e("q-separator",{attrs:{inset:"",color:"grey-3"}})]:t._e(),e("q-item",{staticClass:"q-px-none"},[e("q-bar",{staticClass:"bg-white full-height q-px-none"},[e("div",{staticClass:"q-gutter-md"},[e("q-btn",{attrs:{dense:"",outline:"",round:"",color:t.continueMissionAble?"":"grey",icon:"mdi-play",disable:!t.continueMissionAble},on:{click:t.continueMission}},[e("q-tooltip",[t._v(" "+t._s(t.$t("button.continueExe"))+" ")])],1),e("q-btn",{attrs:{dense:"",outline:"",round:"",color:t.pauseMissionAble?"":"grey",icon:"mdi-pause",disable:!t.pauseMissionAble},on:{click:t.pauseMission}},[e("q-tooltip",[t._v(" "+t._s(t.$t("button.pause"))+" ")])],1),e("q-btn",{attrs:{dense:"",outline:"",round:"",color:t.isMissionRunning?"":"grey",icon:"mdi-stop",disable:!t.isMissionRunning},on:{click:t.stopMission}},[e("q-tooltip",[t._v(" "+t._s(t.$t("button.stop"))+" ")])],1),t.isMoreThanUser?e("q-btn",{attrs:{dense:"",outline:"",round:"",color:t.hasPendingMission?"":"grey",icon:"mdi-playlist-remove",disable:!t.hasPendingMission},on:{click:t.clearAllPendingMission}},[e("q-tooltip",[t._v(" "+t._s(t.$t("button.clearAllPendingMission"))+" ")])],1):t._e(),t.isDeploy?e("q-btn",{attrs:{dense:"",outline:"",round:"",color:!t.missionList.length||t.isMissionRunning?"grey":"",icon:"delete",disable:!t.missionList.length||t.isMissionRunning},on:{click:t.clearMissionReport}},[e("q-tooltip",[t._v(" "+t._s(t.$t("label.clearAllReports"))+" ")])],1):t._e(),e("q-btn",{attrs:{dense:"",outline:"",round:"",icon:"mdi-format-list-numbered"},on:{click:t.showMissionReport}},[e("q-tooltip",[t._v(" "+t._s(t.$t("label.viewReport"))+" ")])],1)],1)])],1),e("q-separator",{attrs:{inset:"",color:"grey-3"}}),t._l(t.missionList,function(s){return e("q-item",{key:s.startTimestamp,staticClass:"q-my-sm",attrs:{dense:""},nativeOn:{click:function(e){return t.loadCurrentMission(s)}}},[e("q-list",{staticClass:"full-width",attrs:{dense:""}},[e("q-item",{staticStyle:{cursor:"pointer"},attrs:{dense:""}},[e("q-item-section",{attrs:{avatar:""}},[e("q-icon",{class:t.missionIconName(s)+" icon_size_16"})],1),e("q-item-section",[e("q-item-label",{staticClass:"text_main_grey_style",attrs:{"label-lines":"1"}},[t._v("\n              "+t._s(s.name)+"\n            ")]),e("q-item-label",{staticClass:"text_small_light_grey",attrs:{caption:"",lines:"1"}},[t._v(t._s(t.missionInfo(s)))])],1),t.isCurMissionPending(s.state)?e("q-item-section",{attrs:{side:""}},[e("q-icon",{class:t.showOrderButtons(s)?"std_collapse":"std_expand",nativeOn:{click:function(e){return t.changedorderButtonState(e,s)}}})],1):t._e()],1),t.showOrderButtons(s)?e("q-item",[e("q-item-section",[e("div",{staticClass:"row background_light_grey"},[t.enableReorder(s)?e("div",[e("std-button",{staticClass:"no-shadow q-mx-sm",attrs:{flat:"",round:"",dense:"",size:"12px","passive-icon":"std_move_up_normal","active-icon":"std_move_up_blue","disable-icon":"std_move_up_grey",iconClass:"icon_size_16",disable:t.disableMoveUp(s.no)},nativeOn:{click:function(e){return t.onMissionUp(e,s.no)}}}),e("std-button",{staticClass:"no-shadow q-mx-sm",attrs:{flat:"",round:"",dense:"",size:"12px","passive-icon":"std_move_down_normal","active-icon":"std_move_down_blue","disable-icon":"std_move_down_grey",iconClass:"icon_size_16",disable:t.disableMoveDown(s.no)},nativeOn:{click:function(e){return t.onMissionDown(e,s.no)}}})],1):t._e(),t.enableCancel(s)?e("std-button",{staticClass:"no-shadow q-mx-sm",attrs:{flat:"",round:"",dense:"",size:"12px","passive-icon":"std_delete_normal","active-icon":"std_delete_blue","disable-icon":"std_delete_grey",iconClass:"icon_size_16"},nativeOn:{click:function(e){return t.cancelMission(e,s.no)}}}):t._e()],1)])],1):t._e()],1)],1)})],2),e("mission-reports",{ref:"missionReport"})],1)},[],!1,null,"17486c30",null),U=R.exports;$()(R,"components",{QList:A.a,QItem:L.a,QItemLabel:j.a,QSeparator:P.a,QBar:E.a,QBtn:w.a,QTooltip:x.a,QItemSection:z.a,QIcon:O.a});var Q={name:"RightDrawer",components:{MissionList:U,SystemStatus:r.a},data(){return{isMobile:this.$q.platform.is.mobile,isEditMapActive:!1}},computed:{...Object(o.d)(["isNotPartnerBeta"]),curDisplayMapName:function(){return this.$store.getters["srp/displayedMapName"]},displayedMapNameIsEqualSrosCurMapName(){return this.$store.getters["srp/displayedMapNameIsEqualSrosCurMapName"]},isUser(){return this.$store.getters["srp/isUser"]},isManualControlPage(){return"/manualcontrol"===this.$route.path},isHomePage(){return"/homePage"===this.$route.path},isHomeMapPage(){return this.isManualControlPage||this.isHomePage},isMapListPage(){return"/maplist"===this.$route.path},isEditMapState(){return this.$store.getters.isEditMap},isCanNotEditMap(){return!(!["","NO_MAP"].includes(this.curDisplayMapName)&&(this.isHomePage||this.isManualControlPage&&this.$store.getters.hasMapLoaded))}},mounted(){},methods:{onEditMapMouseOver(){this.isEditMapActive=!0},onEditMapMouseOut(){this.isEditMapActive=!1},onCloseDrawer(){this.$emit("closeDrawer",!0)},changeMapEditState(){this.displayedMapNameIsEqualSrosCurMapName&&this.$notify({message:this.$t("text.forbiddenSaveMapTip"),type:"warning",timeout:3e3,position:"bottom"}),""===this.$store.state.srp.displayedMapName&&this.$store.commit("srp/setDisplayMapName",this.curDisplayMapName),this.$store.commit("setEditMapState",!0)}}},F=i("2c91"),B=Object(_.a)(Q,function(){var t=this,e=t._self._c;return e("div",{staticClass:"column q-mt-sm no-wrap full-height"},[t.isNotPartnerBeta?t._e():e("div",{staticClass:"q-mt-lg q-mb-sm"},[t.isMapListPage?e("q-btn",{staticClass:"full-width",attrs:{flat:"",align:"left",to:"/homePage"}},[e("q-icon",{staticClass:"std_home_blue",attrs:{size:"16px",left:""}}),e("div",[t._v(t._s(t.$t("label.mainWindow")))])],1):e("q-btn",{staticClass:"full-width",attrs:{flat:"",align:"left",to:"/maplist"}},[e("q-icon",{staticClass:"std_map_blue",attrs:{size:"16px",left:""}}),e("div",[t._v(t._s(t.$t("label.mapList")))])],1)],1),t.isHomeMapPage?e("div",{staticClass:"full-width"},[e("div",{staticClass:"inline q-mb-md"},[e("q-icon",{staticClass:"no-pointer-events std_map_icon_grey q-mx-md"}),e("label",{class:t.displayedMapNameIsEqualSrosCurMapName?"text_main_grey_style text-bold":"text-main_red_style text-bold"},[t._v("\n        "+t._s(t.curDisplayMapName)+"\n        "),t.displayedMapNameIsEqualSrosCurMapName?t._e():e("q-tooltip",[t._v(t._s(t.$t("text.displayMapMismatchLocationMap")))])],1)],1),t.isUser||t.isMobile||!t.isHomeMapPage?t._e():e("div",{staticClass:"column q-mx-md"},[t.isEditMapState?t._e():e("q-btn",{class:"no-shadow unelevated "+(this.isEditMapActive?"border_active_style":"border_passive_style"),attrs:{"no-caps":"",outline:"",unelevated:"",size:"12px",color:"transparent",disable:t.isCanNotEditMap},on:{mouseover:t.onEditMapMouseOver,mouseout:t.onEditMapMouseOut,click:t.changeMapEditState}},[e("q-icon",{staticClass:"q-mr-sm",class:"icon_size_18 "+(t.isEditMapActive?"std_pen_blue":"std_pen_normal")}),e("div",{class:this.isEditMapActive?"text_small_blue_style":"text_small_grey_style"},[t._v("\n          "+t._s(t.$t("button.editCurMap"))+"\n        ")])],1)],1)]):t._e(),t.isNotPartnerBeta?e("div",{staticClass:"scroll q-mt-md"},[e("mission-list")],1):t._e(),e("q-space"),e("div",{},[e("system-status")],1),e("div",{staticClass:"row justify-center q-mb-lg"},[e("q-btn",{staticClass:"no-shadow",attrs:{"no-caps":"",unelevated:"",round:"",outline:"",color:"transparent"},on:{click:t.onCloseDrawer}},[e("q-icon",{staticClass:"icon_size_16x22 std_arrow_right"})],1)],1)],1)},[],!1,null,"7c9f2426",null),Y=B.exports;$()(B,"components",{QBtn:w.a,QIcon:O.a,QTooltip:x.a,QSpace:F.a});var V=i("b965"),W={name:"MainMenu",data:()=>({}),props:{simplified:Boolean},computed:{...Object(o.f)(["quickOrderGroupList"]),...Object(o.d)("srp",["isMoreThanUser"]),routerPath:function(){return this.$route.path},permission(){let t=this.$store.getters["srp/account"];return null==t||void 0===t?0:t.permission},isDisplayLogo(){return this.$store.getters.isDisplayLogo},menus(){let[t,e,s]=["editMission"===this.$route.name,!1,!1];var i;t&&(s=(null===(i=this.$route.query)||void 0===i?void 0:i.missionType)===p.c.MissionTemplate,e=!s);return[{id:1,label:this.$t("label.mainPage"),available:0,children:[{id:1,label:this.$t("label.mainWindow"),url:"/homePage",iconPassive:"std_home_grey",iconActive:"std_home_blue",isSelected:!1,available:0,children:[]}]},{id:2,label:this.$t("label.mapPage"),available:20,children:[{id:1,label:this.$t("label.mapList"),url:"/maplist",iconPassive:"std_map_grey",iconActive:"std_map_blue",isSelected:!1,available:20,children:[]},{id:2,label:this.$t("label.mapEdit")+`(${this.$t("label.forward")})`,url:"/manualcontrol",iconPassive:"std_pen_normal",iconActive:"std_pen_blue",isSelected:!1,available:10,children:[]}]},{id:7,label:this.$t("label.quickOrder"),available:0,children:[{id:1,label:this.$t("label.quickOrderGroup"),url:"/quickOrderGroup",iconPassive:"std_order_grey",iconActive:"std_order_blue",isSelected:!1,available:0,children:[...this.quickOrderGroupList.map(t=>({id:t.id,label:t.name,color:t.background,url:`/quickOrder/${t.id}`,icon:"mdi-circle",size:"14px",isCustomize:!0,isSelected:!1,className:"rotate-90 q-mr-xs",available:0,children:[]}))]}]},{id:3,label:this.$t("label.missionPage"),available:20,children:[{id:1,label:this.$t("label.missionList"),url:"/missionlist",iconPassive:"std_task_grey",iconActive:"std_task_blue",isSelected:e,available:20,children:[]},{id:2,label:this.$t("label.missionTemplate"),url:"/missionTemplate",iconPassive:"std_template_grey",iconActive:"std_template_blue",isSelected:s,available:20,children:[]},{id:3,label:this.$t("label.scheduleTask"),url:"/scheduleTask",iconPassive:"std_schedule_grey",iconActive:"std_schedule_blue",isSelected:!1,available:20,children:[]}]},{id:4,label:this.$t("label.system"),available:20,children:[{id:1,label:this.$t("label.systemSettings"),url:"/settings",iconPassive:"std_setting_grey",iconActive:"std_setting_blue",isSelected:!1,available:20,children:[]},{id:2,label:this.$t("label.paramConfigs"),url:"/configStructure",iconPassive:"std_param_grey",iconActive:"std_param_blue",isSelected:[V.g.FUNCTION_CONFIG,V.g.OBA_CONFIG,V.g.RACK_CONFIG].includes(this.$route.name),available:20,children:[]},{id:3,label:this.$t("label.accountAdmin"),url:"/accountAdmin",iconPassive:"std_user_grey",iconActive:"std_user_blue",isSelected:!1,available:20,children:[]},{id:4,label:this.$t("label.connAdmin"),url:"/connectionList",iconPassive:"std_conn_grey",iconActive:"std_conn_blue",isSelected:!1,available:20,children:[]},{id:5,label:this.$t("label.maintenance"),url:"/maintenance",iconPassive:"std_tool_grey",iconActive:"std_tool_blue",isSelected:!1,available:20,children:[]}]},{id:5,label:this.$t("label.debugPage"),available:20,children:[{id:1,label:this.$t("label.hardwareState"),url:"/hardwarestate",iconPassive:"std_hardware_grey",iconActive:"std_hardware_blue",isSelected:!1,available:20,children:[]},{id:2,label:this.$t("label.performance"),url:"/performance",iconPassive:"std_statistic_grey",iconActive:"std_statistic_blue",isSelected:!1,available:30,children:[]},{id:3,label:this.$t("label.systemLog"),url:"/systemLog",iconPassive:"std_log_grey",iconActive:"std_log_blue",isSelected:!1,available:20,children:[]},{id:5,label:this.$t("label.alarmManage"),url:"/alarmManage",iconPassive:"std_alarm_manage_gray",iconActive:"std_alarm_manage_blue",isSelected:!1,available:20,children:[]},{id:4,label:this.$t("label.debugVisualization"),url:"/debugVisualization",iconPassive:"std_image_text_gray",iconActive:"std_image_text_blue",isSelected:!1,available:20,children:[{id:541,label:this.$t("label.networkSignalStrengthCloudMap"),url:"/networkSignalStrengthCloudMap",icon:"mdi-wifi",size:"16px",isCustomize:!1,isSelected:!1,available:20,className:"q-mr-xs",children:[]}]}]},{id:6,label:this.$t("label.helpPage"),available:20,children:[{id:1,label:this.$t("label.aboutUsPage"),url:"/aboutus",iconPassive:"std_about_grey",iconActive:"std_about_blue",isSelected:!1,available:20,children:[]}]}]}},methods:{getIconColor(t){const{isCustomize:e,color:s,iconPassive:i="#ced0d8",iconActive:a="#0099ff",url:n,isSelected:o}=t;return e?s:o||n==this.routerPath?a:i},onChangedLeftDrawerState(){this.$emit("changeState",!0)},updateSelectedMenu(t){}}},G=(i("3ea2"),i("3b73")),H=Object(_.a)(W,function(){var t=this,e=t._self._c;return e("div",{staticClass:"fit column no-wrap"},[t.isDisplayLogo?e("div",{staticClass:"flex justify-center home-image",class:t.simplified?"logo_size_small":""},[t.$debug?e("img",{attrs:{src:i("2715"),alt:"homeImage.svg"}}):e("img",{attrs:{src:"static/source/companyInformation/homeImage.svg",alt:"homeImage.svg"}})]):t._e(),e("q-list",{staticClass:"q-mt-sm flex-1 overflow-auto user",attrs:{link:"","no-border":""}},[t._l(t.menus,function(s){return[t.permission>=s.available?[t.simplified?t._e():e("q-item-label",{key:"firstMenu"+s.id+s.label,staticClass:"text_small_light_grey q-ml-md q-mt-sm"},[t._v("\n          "+t._s(s.label)+"\n        ")]),t._l(s.children,function(s){return[t.permission>=s.available?[e("q-expansion-item",{key:"secondMenu"+s.id+s.label,attrs:{"expand-icon-toggle":"","hide-expand-icon":t.simplified||s.children.length<=0,"content-inset-level":.5,to:s.url,"header-class":"/quickOrderGroup"===s.url?"q-pr-none":""},scopedSlots:t._u([{key:"header",fn:function(){return[e("q-item-section",{attrs:{side:""}},[e("q-icon",{class:s.isSelected||s.url==t.routerPath?s.iconActive:s.iconPassive})],1),t.simplified?t._e():e("q-item-section",{class:[s.isSelected||s.url===t.routerPath?"text_main_blue_style":"text_main_grey_style","/quickOrderGroup"===s.url?"q-pr-none":""],attrs:{side:""}},[t._v(t._s(s.label))])]},proxy:!0}],null,!0)},[!t.simplified&&s.children.length>0?e("q-list",{staticClass:"overflow-auto",attrs:{link:""}},t._l(s.children,function(s){return e("q-item",{key:"thirdMenu"+s.id+s.label,staticClass:"row items-center",attrs:{clickable:"",to:s.url}},[e("q-icon",{class:s.className,style:{color:t.getIconColor(s)},attrs:{name:s.icon,size:s.size}}),e("q-item-section",{class:[s.isSelected||s.url===t.routerPath?"text_main_blue_style":"text_main_grey_style"]},[t._v("\n                    "+t._s(s.label)+"\n                  ")])],1)}),1):t._e()],1)]:t._e()]})]:t._e()]})],2),e("div",{staticClass:"row justify-center"},[e("q-btn",{staticClass:"no-shadow",attrs:{"no-caps":"",outline:"",unelevated:"",color:"transparent"},on:{click:t.onChangedLeftDrawerState}},[e("q-icon",{class:"icon_size_16x22 "+(t.simplified?"std_arrow_right":"std_arrow_left")})],1)],1)],1)},[],!1,null,"02c3fd85",null),K=H.exports;$()(H,"components",{QList:A.a,QItemLabel:j.a,QExpansionItem:G.a,QItemSection:z.a,QIcon:O.a,QItem:L.a,QBtn:w.a});var Z=i("af60"),J=i("482f");var X={name:"ReconnectModal",inject:["showLoading","hideLoading"],components:{LoadingDialog:J.a,HeaderItem:g.a},data:function(){return{isMobile:this.$q.platform.is.mobile,isOpened:!1,times:1,reconnectTimer:0}},props:{opened:Boolean},computed:{...Object(o.f)(["ipAddress","wsPort"]),...Object(o.d)(["vehicleUpgradeInfoState"]),mixOpened(){return this.isOpened&&0===this.vehicleUpgradeInfoState}},methods:{...Object(o.e)(["vehicleUpgradeInfoSet"]),reject:async function(){clearTimeout(this.reconnectTimer),this.$emit("update:opened",!1);try{this.showLoading(this.$t("label.logouting")),await m.d.logout(),this.$store.commit("setToken",!1),this.$store.getters.isEditMap||this.$store.getters.isEditMission||this.$store.commit("srp/setAccount",{permission:0,id:-1})}catch(t){this.$notify({message:this.$t("text.logoutFailed"),timeout:3e3,type:"negative",position:"top"})}this.hideLoading()},reconnectCallback:async function(){if(30===this.times){if(0===this.vehicleUpgradeInfoState)return void this.reject();this.times=1}let t=this.$store.getters["srp/account"];if(this.ipAddress&&this.wsPort&&t.username&&t.passwd)try{let e=await m.d.login(this.ipAddress,this.wsPort,t.username,t.passwd);await Object(m.b)(),this.$store.commit("setManualLogout",!1),this.$store.commit("setToken",!0),this.$store.commit("srp/setSessionId",e),0===this.vehicleUpgradeInfoState&&(this.$notify({message:this.$t("text.reconnectSucceed"),timeout:3e3,type:"positive",position:"top"}),this.$root.$emit("login",d.i.Reconnect,!0)),this.$emit("update:opened",!1)}catch(t){if(!this.isOpened)return;clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout(this.reconnectCallback,3e3),++this.times}}},watch:{opened:function(t,e){this.isOpened=t,t?(this.times=1,this.reconnectTimer=setTimeout(this.reconnectCallback,3e3)):clearTimeout(this.reconnectTimer)}},destroyed:function(){clearTimeout(this.reconnectTimer)}},tt=i("d9b2"),et=Object(_.a)(X,function(){var t=this,e=t._self._c;return e("q-dialog",{attrs:{"no-backdrop-dismiss":"","no-esc-dismiss":"",preventClose:""},model:{value:t.mixOpened,callback:function(e){t.mixOpened=e},expression:"mixOpened"}},[e("q-card",{staticClass:"popup_style"},[e("div",{staticClass:"q-mx-md q-mt-md"},[e("header-item",{attrs:{title:t.$t("label.disconnected")},on:{close:t.reject}}),e("div",{staticClass:"row justify-center items-center"},[e("q-spinner-ios",{attrs:{color:"primary",size:"24px"}}),e("span",{staticClass:"text_main_grey_style q-my-lg q-ml-md"},[t._v(t._s(t.$t("text.reconnecting"))+"("+t._s(t.times)+")")])],1),e("div",{staticClass:"float-right"},[e("q-btn",{staticClass:"default_button_style q-mb-md no-shadow",attrs:{dense:"","no-caps":"",unelevated:"",color:"primary"},on:{click:t.reject}},[e("div",{staticClass:"text_main_white_style"},[t._v(t._s(t.$t("button.cancel")))])])],1)],1)])],1)},[],!1,null,"49e445f2",null),st=et.exports;$()(et,"components",{QDialog:y.a,QCard:M.a,QSpinnerIos:tt.a,QBtn:w.a});var it=i("1369"),at=i("2cd7"),nt=i("6825"),ot=i("d5bc"),rt=i("c3a9"),lt=i("d6c6"),ct=i("ca95"),dt=i.n(ct),ut=i("2b0e");let ht=0;ut.default.use(dt.a,{name:"v-touch"});const mt=[11344,11143];var pt={name:"FaultDialog",components:{HeaderItem:g.a},inject:["showMessage"],data(){return{isDesktop:this.$q.platform.is.desktop,opened:!1,selectedID:0,allFaults:[]}},computed:{faults(){return this.$store.getters["srp/faultsList"]}},watch:{faults(t,e){if(this.opened)for(let e of Array.from(t))this.isFaultContained(e.id)||this.allFaults.push(e)}},mounted(){},methods:{doOpen(){this.allFaults=this.faults,this.opened=!0},onOkay(){this.opened=!1},onPressed(t){},restoreFault(t){try{m.d.tryRemoveFailure(t)}catch(t){this.showMessage({title:this.$t("button.faultRecover"),message:this.$t("text.failTryRemoveFailure")+t.message})}},isFaultResolved(t){return this.faults.every(e=>e.id!==t)},isFaultContained(t){for(let e of Array.from(this.allFaults))if(e.id===t)return!0;return!1},textStyle(t){let e="text-center no-pointer-events q-mt-sm q-px-sm";if(this.isFaultResolved(t.id))return e+=" text_main_grey_style",e;let s=Object(d.K)(t.id);if(null==s)return e;switch(s.level){case d.j.INFO:e+=" text_main_grey_style";break;case d.j.WARNING:e+=" text_main_yellow_style";break;case d.j.ERROR:case d.j.FATAL:e+=" text-main_red_style"}return t.responseBehavior!==ht&&(e+=" text-bold"),e},displayTime:t=>Object(d.F)(1e3*t),displayID:t=>Object(d.A)(t,6),displayFaultDesc(t){let e=Object(d.K)(t);return null==e?"":e.desc},displayFaultResolve(t){let e=Object(d.K)(t);return null==e?"":e.how},deviceName(t){let e=Object(d.K)(t);return null==e?"":e.device},onItemMouseOver(t,e){this.setCurrentID(e)},setCurrentID(t){this.selectedID=t},hasLookDeviceHealthIds:t=>mt.includes(t),navigateToDeviceHealth(){window.open(`#/iframe?lang=${this.$i18n.locale}&target=deviceHealth`,"_blank")}}},gt=Object(_.a)(pt,function(){var t=this,e=t._self._c;return e("q-dialog",{attrs:{"no-backdrop-dismiss":""},on:{"escape-key":t.onOkay},model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[e("q-card",{staticStyle:{width:"1000px","max-width":"1000px"},on:{click:function(e){return t.setCurrentID(0)}}},[e("div",{staticClass:"q-mx-md q-mt-md"},[e("header-item",{attrs:{title:t.$t("label.notificationCenter")},on:{close:t.onOkay}}),e("div",{staticClass:"row full-width q-my-sm"},[e("label",{staticClass:"col-1 text_small_light_grey text-center"},[t._v(t._s(t.$t("label.ID")))]),e("label",{staticClass:"col-1 text_small_light_grey text-center"},[t._v(t._s(t.$t("label.device")))]),e("label",{staticClass:"col-2 text_small_light_grey text-center"},[t._v(t._s(t.$t("label.datetime")))]),e("label",{staticClass:"col-4 text_small_light_grey text-center"},[t._v(t._s(t.$t("label.desc")))]),e("label",{staticClass:"col-3 text_small_light_grey text-center"},[t._v(t._s(t.$t("label.resolve")))]),e("label",{staticClass:"col-1 text_small_light_grey text-center"},[t._v(t._s(t.$t("label.operation")))])]),e("q-separator",{staticClass:"text_small_light_grey q-my-sm"}),e("q-list",{staticClass:"scroll",staticStyle:{"max-height":"600px"}},t._l(t.allFaults,function(s){return e("q-item",{key:s.id+t.deviceName(s.id),staticClass:"q-px-none",staticStyle:{"min-height":"52px"},attrs:{clickable:"",tag:"label"}},[e("v-touch",{staticClass:"full-width",attrs:{"pin-options":{threshold:0},"pan-options":{threshold:0}},nativeOn:{mouseover:function(e){return t.onItemMouseOver(e,s.id)}}},[e("span",{staticClass:"row full-width"},[e("q-item-label",{class:"col-1 "+t.textStyle(s),staticStyle:{"word-break":"break-all"}},[t._v("\n                "+t._s(t.displayID(s.id))+"\n              ")]),e("q-item-label",{class:"col-1 "+t.textStyle(s),staticStyle:{"word-break":"break-all"}},[t._v("\n                "+t._s(t.deviceName(s.id))+"\n              ")]),e("q-item-label",{class:"col-2 q-mt-sm "+t.textStyle(s)},[t._v("\n                "+t._s(t.displayTime(s.raiseTimestamp))+"\n              ")]),e("q-item-label",{class:"col-4 q-mt-sm white-space-pre-line "+t.textStyle(s)},[t._v(t._s(t.displayFaultDesc(s.id)))]),e("q-item-label",{class:"col-3 q-mt-sm white-space-pre-line "+t.textStyle(s)},[t._v(t._s(t.displayFaultResolve(s.id)))]),t.isFaultResolved(s.id)?e("q-item-label",{class:"col-1 q-mt-sm "+t.textStyle(s)},[t._v("\n                "+t._s(t.$t("label.isResolved"))+"\n              ")]):t.hasLookDeviceHealthIds(s.id)?e("div",{staticClass:"column col-1 justify-center"},[e("q-btn",{staticClass:"no-shadow",staticStyle:{height:"36px"},attrs:{"no-caps":"",unelevated:"",dense:"",color:"primary"},on:{click:t.navigateToDeviceHealth}},[t._v("\n                  "+t._s(t.$t("button.view"))+"\n                ")])],1):s.canAutomaticallyRecover&&t.selectedID===s.id&&t.selectedID>0?e("span",{staticClass:"column col-1 justify-center"},[e("q-btn",{staticClass:"no-shadow",staticStyle:{height:"36px"},attrs:{"no-caps":"",unelevated:"",dense:"",color:"primary",icon:"refresh"},on:{click:function(e){return t.restoreFault(s.id)}}},[e("q-tooltip",{staticClass:"text_main_white_style"},[t._v(t._s(t.$t("button.faultRecover")))])],1)],1):t._e()],1)])],1)}),1),e("div",{staticClass:"row justify-center q-my-md"},[e("q-btn",{staticClass:"no-shadow text_main_white_style default_button_style",attrs:{"no-caps":"",unelevated:"",color:"primary"},on:{click:t.onOkay}},[t._v(t._s(t.$t("label.closed")))])],1)],1)])],1)},[],!1,null,"68d6e53e",null),bt=gt.exports;$()(gt,"components",{QDialog:y.a,QCard:M.a,QSeparator:P.a,QList:A.a,QItem:L.a,QItemLabel:j.a,QBtn:w.a,QTooltip:x.a});var _t=i("713c"),yt={name:"ReleaseRemind",data:()=>({remindReleaseTimer:0}),computed:{...Object(o.f)("srp",["robotInfo"]),srosVersionText(){var t;return(null===(t=this.robotInfo)||void 0===t?void 0:t.srosVersionStr)||""},isTestVersion(){return this.srosVersionText&&!(this.$debug||/demo|customized/.test(_t.a)||/\[((release|lts)_)?v?(\d+\.){2}(\d+|x)\]/i.test(this.srosVersionText)&&!/alpha/i.test(this.srosVersionText))}},beforeDestroy(){this.remindRelease(!1)},methods:{initDat(){this.isTestVersion&&(this.showTooltip(),this.setWM({content:this.$t("text.testVersion",{versionStr:this.srosVersionText})}),this.remindRelease(!0))},remindRelease(t=!1){this.remindReleaseTimer&&(clearInterval(this.remindReleaseTimer),this.remindReleaseTimer=0),t&&(this.remindReleaseTimer=setTimeout(()=>{this.isTestVersion&&(this.showTooltip(),this.remindRelease(!0))},36e5))},showTooltip(){this.$q.notify({message:this.$t("label.warning")+":"+this.$t("text.remindSROSRelease",{versionStr:this.srosVersionText}),progress:!0,color:"warning",icon:"warning",position:"top",timeout:5e3,actions:[{label:this.$t("label.IKnown"),color:"white"}]})},setWM({container:t=document.body,width:e="700px",height:s="450px",textAlign:i="left",textBaseline:a="middle",font:n="15px Roboto",fillStyle:o="#a0a0a0",content:r="",rotate:l=-20,zIndex:c=1e5}={}){const d=document.createElement("canvas");d.setAttribute("width",e),d.setAttribute("height",s);const u=d.getContext("2d");u.textAlign=i,u.textBaseline=a,u.font=n,u.fillStyle=o,u.rotate(Math.PI/180*l),u.fillText(r,parseFloat(e)/8,parseFloat(s)/2);const h=d.toDataURL();let m=document.querySelector(".wm");const p=m||document.createElement("div"),g=`\n                  position:fixed;\n                  top:0;\n                  left:0;\n                  bottom:0;\n                  right:0;\n                  width:100%;\n                  height:100%;\n                  opacity: 0.7;\n                  filter: gray;\n                  -webkit-filter: grayscale(100%);\n                  z-index:${c};\n                  pointer-events:none;\n                  background-repeat:repeat;\n                  background-image:url('${h}')`;p.setAttribute("style",g),p.classList.add("wm"),m||t.insertBefore(p,t.firstChild),t=null,m=null}}},Mt=Object(_.a)(yt,function(){return(0,this._self._c)("div")},[],!1,null,"4950b421",null).exports,ft=i("1712"),vt={components:{FaultDialog:bt,QuestionDialog:lt.a,InputDialog:rt.a,LoadingDialog:J.a,MessageDialog:ot.a,ContextMenu:nt.a,SelectDialog:at.a,ReconnectModal:st,MainMenu:K,RightDrawer:Y,ReleaseRemind:Mt},inject:["doSetLanguage","reload"],provide(){return{showLoading:this.showLoading,hideLoading:this.hideLoading,getInput:this.getInput,doAsk:this.doAsk,showMessage:this.showMessage,doSelect:this.doSelect,changeCacheRoute:this.changeCacheRoute,checkEmergency:this.checkEmergency}},data(){return{pingNetworkTimerId:0,refreshNetworkWirelessInfoTimerId:0,leftDrawerOpen:!0,rightDrawerOpen:!this.$q.platform.is.mobile,showReconnectModal:!1,isMobile:this.$q.platform.is.mobile,isLeftDrawSimplified:this.$q.platform.is.mobile,cachedComponents:["ManualControlPage","HomePage","DebugVisualizationPage"],networkPingValue:10,setEmergencyCallbackObject:{resolve:null,reject:null},cancelEmergencyCallbackObject:{resolve:null,reject:null},factoryModeNotify:null,langOptions:Object(d.M)(),enableUserSystemControlNotifies:{lockedByOthers:null,schedulingModeAuto:null,schedulingModeMaintenance:null},documentVisibility:Object(a.useDocumentVisibility)()}},mounted:async function(){this.$root.$on("login",this.onLogin),await Object(d.Q)(300),this.$store.commit("setLeftDrawerState",this.leftDrawerOpen),this.$store.commit("setRigthDrawerState",this.rightDrawerOpen),this.getClientIP();let t=this.$i18n.locale,e=await Object(u.lb)("action_table",t),s=[];for(let t in e)s=s.concat(e[t]);let i=await Object(u.lb)("error_code",t);this.$store.commit("setErrorList",i),Object(h.n)(s);let a=await Object(u.lb)("sensor_color_display",t);this.$store.commit("setSensorColorDisplay",a);let n=await Object(u.lb)("modbus_register",t);null!==n&&Object(h.p)(n),this.mapItemUserDefinedPropertiesGet("user_defined_properties",t),await this.requestRobotInfo(),this.startPingNetwork(),this.$nextTick(function(){var t;null===(t=this.$refs.refReleaseRemind)||void 0===t||t.initDat()})},beforeDestroy:function(){var t,e,s,i,a,n,o;null===(t=this.factoryModeNotify)||void 0===t||t.call(this),null===(e=(s=this.enableUserSystemControlNotifies).lockedByOthers)||void 0===e||e.call(s),null===(i=(a=this.enableUserSystemControlNotifies).schedulingModeAuto)||void 0===i||i.call(a),null===(n=(o=this.enableUserSystemControlNotifies).schedulingModeMaintenance)||void 0===n||n.call(o),this.$root.$off("login",this.onLogin),this.stopPingNetwork(),this.stopRefreshNetworkWirelessInfo()},computed:{...Object(o.f)(["networkWirelessInfo","quickOrderGroupList"]),...Object(o.f)("srp",["hardwareState"]),...Object(o.d)(["isWirelessNetworkCard","wlanText","apText","isNotPartnerBeta"]),...Object(o.d)("srp",["isManualCtrlState","isMissionRunning","isSchedulingModeManual","isSchedulingModeAuto","isSchedulingModeMaintenance","isLockedState","isLockedByOthers","isLockedByMyself","isMoreThanUser","enableSystemControl"]),isRefreshNetworkWirelessInfo(){return this.isConnected&&this.isWirelessNetworkCard},currentLang(){let t=this.$store.getters.language;return Object(d.L)(t)},routerName:function(){const t=this.$route.name;return{mapEdit:`${this.$t("label.mapEdit")}(${this.$t("label.forward")})`,[V.g.FUNCTION_CONFIG]:this.$t("label.paramConfigs")}[t]||this.$t("label."+t)},subRouterName(){if("quickOrder"===this.$route.name){var t;const e=this.$route.params.groupId||"0",s=+e;return(null===(t=this.quickOrderGroupList.find(t=>t.id===s))||void 0===t?void 0:t.name)||e}return""},batteryPercentage:function(){let t=this.$store.state.srp.hardwareState.batteryPercentage;return t>=100&&(t=100),t},currentUserName:function(){let t=this.$store.getters["srp/account"];return null==t?"":t.username},faults(){return this.$store.getters["srp/faultsList"]},faultStyle(){return this.hasFaultLevel(d.j.FATAL)||this.hasFaultLevel(d.j.ERROR)?"red":this.hasFaultLevel(d.j.WARNING)?"yellow-9":"grey-6"},batteryState:function(){return{title:this.$t("label.battery"),items:[{name:this.$t("label.state"),value:m.d.batteryStateString(this.hardwareState.batteryState),units:""},{name:this.$t("label.electricity"),value:this.hardwareState.batteryPercentage,units:"%"},{name:this.$t("label.temperature"),value:this.hardwareState.batteryTempreature,units:"â„ƒ"},{name:this.$t("label.voltage"),value:(this.hardwareState.batteryVoltage/1e3).toFixed(2),units:"V"},{name:this.$t("label.current"),value:(this.hardwareState.batteryCurrent/1e3).toFixed(2),units:"A"},{name:this.$t("label.power"),value:(this.hardwareState.batteryVoltage*this.hardwareState.batteryCurrent/1e3/1e3).toFixed(2),units:"W"},{name:this.$t("label.batteryNormalCapacity"),value:this.hardwareState.batteryNominalCapacity,units:"Ah",isVisible:0!==this.hardwareState.batteryNominalCapacity},{name:this.$t("label.batteryRemainCapacity"),value:this.hardwareState.batteryRemainCapacity,units:"Ah",isVisible:0!==this.hardwareState.batteryNominalCapacity},{name:this.$t("label.batteryCycleTimes"),value:this.hardwareState.batteryUseCycles,units:"",isVisible:0!==this.hardwareState.batteryNominalCapacity},{name:this.$t("label.batteryRemainTime"),value:Object(d.G)(60*parseInt(this.hardwareState.batteryRemainTime)),units:""},{name:this.$t("label.lowPower"),value:this.formatPowerState(this.hardwareState.powerState),units:""}]}},batteryIcon:function(){let t=this.hardwareState.batteryState===Z.d.BATTERY_CHARGING,e="";return e=this.batteryPercentage<=10?t?"std_battery_charging_10":"std_battery_10":this.batteryPercentage<=20?t?"std_battery_charging_20":"std_battery_20":this.batteryPercentage<=30?t?"std_battery_charging_30":"std_battery_30":this.batteryPercentage<=40?t?"std_battery_charging_40":"std_battery_40":this.batteryPercentage<=50?t?"std_battery_charging_50":"std_battery_50":this.batteryPercentage<=60?t?"std_battery_charging_60":"std_battery_60":this.batteryPercentage<=70?t?"std_battery_charging_70":"std_battery_70":this.batteryPercentage<=80?t?"std_battery_charging_80":"std_battery_80":this.batteryPercentage<=90?t?"std_battery_charging_90":"std_battery_90":t?"std_battery_charging_100":"std_battery_100",e},batteryColor(){return this.hardwareState.batteryState===Z.d.BATTERY_CHARGING?"positive":this.batteryPercentage<=20?"negative":""},emergencyStateIsNone:function(){return this.$store.getters["srp/isEmergencyNone"]},isBreakSwitchOpened:function(){return this.$store.getters["srp/isBreakSwitchOpened"]},isConnected(){return this.$store.getters.isConnected},isEditMap(){return this.$store.getters.isEditMap},networkStateIcon(){let t="";return t=this.networkPingValue<20?"std_wifi_4":this.networkPingValue<200?"std_wifi_3":this.networkPingValue<800?"std_wifi_2":"std_wifi_1",t},networkStateColor:()=>"white",isFactoryMode(){return this.$store.state.srp.systemState.isFactoryMode}},methods:{...Object(o.c)(["getNetworkWirelessInfoAction"]),...Object(o.c)("srp",["requestRobotInfo"]),changeCacheRoute(t={}){const{name:e,active:s}=t;e&&(this.cachedComponents=Object(d.I)(s?"union":"minus",this.cachedComponents,[e]))},refreshMapList:async function(){try{await this.$store.dispatch("srp/getMapList")}catch(t){this.$notify({message:t.message,timeout:3e3,type:"negative",position:"top"})}},startPingNetwork(){this.stopPingNetwork(),this.pingNetworkTimerId=setInterval(()=>{let t=(new Date).getTime();m.d.pingNetwork().then(e=>{e<=0||(this.networkPingValue=e-t)}).catch(t=>{this.networkPingValue="âˆž "})},3e3)},stopPingNetwork(){this.pingNetworkTimerId>0&&clearInterval(this.pingNetworkTimerId)},async startRefreshNetworkWirelessInfo(){this.stopRefreshNetworkWirelessInfo(),this.isRefreshNetworkWirelessInfo&&(this.refreshNetworkWirelessInfoTimerId=setInterval(()=>{this.isRefreshNetworkWirelessInfo&&this.getNetworkWirelessInfoAction()},6e4))},stopRefreshNetworkWirelessInfo(){this.refreshNetworkWirelessInfoTimerId>0&&clearInterval(this.refreshNetworkWirelessInfoTimerId)},showFaultDialog(t){t.stopPropagation(),this.$refs.faultDlg.doOpen()},showLoading(t=this.$t("label.loading")){this.$refs.loadingDlg.doOpen(t)},hideLoading(){this.$refs.loadingDlg.doClose()},async checkEmergency(){if(this.emergencyStateIsNone)return!0;try{if(!await this.showMessage({title:this.$t("button.cancelEmergency"),message:this.$t("text.cancelEmergencyAndContinue"),chooseButton:!0}))return!1;m.d.cancelEmergencyState(),this.showLoading(this.$t("text.cancelEmergencying"));let t=10;for(;t>=0&&this.$store.getters["srp/faultsList"].length>0;){if(t<0)return this.hideLoading(),!1;await Object(d.Q)(d.u),t--}return this.hideLoading(),!0}catch(t){return!1}},async getInput(t){return await this.$refs.inputDlg.doInput(t)},async doAsk(t){try{return await this.$refs.questionDlg.doAsk(t),!0}catch(t){return!1}},async showMessage(t){try{await this.$refs.messageDlg.doShowMessage(t)}catch(t){return!1}return!0},async doSelect(t,e,s=null){let i=null;try{i=await this.$refs.selectDlg.doSelect({title:t,options:e,value:s})}catch(t){}return i},async setLanguage(){this.stopPropagation(event);let t=await this.doSelect(this.$t("label.chooseLang"),Object(d.M)(),this.$store.getters.language);null!=t&&this.doSetLanguage(t)},async openCtxMenu(t){this.stopPropagation(t);let e=[];this.isConnected?e.push({id:1,name:this.$t("button.logout"),isActive:!1}):e.push({id:2,name:this.$t("button.relogin"),isActive:!1}),e.push({id:3,name:this.$t("label.setLang"),isActive:!1});let s=null;try{s=await this.$refs.ctxMenu.openContextMenu(e)}catch(t){}if(null!=s)switch(s.id){case 1:this.logout();break;case 2:this.relogin();break;case 3:this.setLanguage()}},getClientIP(){let t=new RTCPeerConnection({iceServers:[]}),e=function(){};t.onicecandidate=s=>{if(s.candidate){let i=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/.exec(s.candidate.candidate);if(null==i)return;let a=i[1];void 0!==a&&""!==a&&null!==a&&this.$store.commit("setClientIP",a),t.onicecandidate=e}},t.createDataChannel("dog"),t.createOffer(t.setLocalDescription.bind(t),e)},refreshMissionList:async function(){try{await this.$store.dispatch("srp/getMissionList")}catch(t){this.$notify({message:t.message,timeout:3e3,type:"negative",position:"top"})}},gotoHomePage(){this.$debug?this.reload():"/homePage"!==this.$route.path&&this.$router.replace({path:"/homePage"})},stopPropagation(t){t.stopPropagation()},async setEmergency(t){this.stopPropagation(t);try{this.showLoading(this.$t("text.emergencying")),await m.d.setEmergency()}catch(t){return this.hideLoading(),void this.$notify({message:this.$t("text.failEmergency")+t.message,timeout:3e3,type:"negative",position:"top"})}try{await Object(d.B)(()=>{},this.setEmergencyCallbackObject,d.v),this.hideLoading(),this.$notify({message:this.$t("text.succeedEmergency"),timeout:3e3,type:"positive",position:"top"})}catch(t){this.hideLoading(),this.$notify({message:this.$t("text.failEmergency")+t.message,timeout:3e3,type:"negative",position:"top"})}},async cancelEmergencyState(t){this.stopPropagation(t);try{this.showLoading(this.$t("text.cancelEmergencying")),await m.d.cancelEmergencyState()}catch(t){return this.hideLoading(),void this.$notify({message:this.$t("text.failCancelEmergeny")+t.message,timeout:3e3,type:"negative",position:"top"})}try{await Object(d.B)(()=>{},this.cancelEmergencyCallbackObject,d.v),this.hideLoading(),this.$notify({message:this.$t("text.succeedCancelEmergency"),timeout:3e3,type:"positive",position:"top"})}catch(t){this.hideLoading(),this.$notify({message:this.$t("text.failCancelEmergeny")+t.message,timeout:3e3,type:"negative",position:"top"})}},toggleFullscreen(t){this.stopPropagation(t),this.$q.fullscreen.toggle()},async logout(){if(this.isEditMap)await this.showMessage({title:this.$t("label.notice"),message:this.$t("text.quitEditMap")});else if(this.$store.getters.isEditMission)await this.showMessage({title:this.$t("label.notice"),message:this.$t("text.quitEditMission")});else{try{this.showLoading(this.$t("text.quittingLogin")),await m.d.logout(),this.$store.commit("setManualLogout",!0),this.$store.commit("setToken",!1),this.$router.replace("/"),this.$store.commit("reset"),this.$store.commit("srp/setAccount",{permission:0,id:-1}),this.$store.commit("srp/reset")}catch(t){this.$notify({message:this.$t("text.quitLoginFailed"),timeout:3e3,type:"negative",position:"top"})}this.hideLoading()}},async relogin(){try{let t=this.$store.getters["srp/account"],e=await m.d.login(this.$store.state.ipAddress,this.$store.state.wsPort,t.username,t.passwd);this.$store.commit("setToken",!0),this.$store.commit("setManualLogout",!1),this.$store.commit("srp/setSessionId",e),await Object(m.b)(),await Object(d.Q)(500),this.$root.$emit("login",d.i.Reconnect,!0),this.isLockedState&&!this.isLockedByMyself&&this.$notify({message:this.$t("text.systemUnavailable"),timeout:3e3,type:"warning",position:"top"})}catch(t){this.$notify({message:t.message,timeout:3e3,type:"negative",position:"top"})}},async onLogin(t,e){if(e){await this.refreshMapList(),await this.refreshMissionList(),await this.requestRobotInfo();let t=await m.d.getInfo();this.$store.commit("srp/setRobotInfo",t),this.startPingNetwork()}},onCloseRightDrawer(t){this.rightDrawerOpen=!1},hasFaultLevel(t){for(let e of Array.from(this.faults)){let s=Object(d.K)(e.id);if(null!=s&&s.level===t)return!0}return!1},formatPowerState(t){let e="NA";switch(t){case"POWER_NA":case 0:e="N/A";break;case"POWER_NORMAL":case 1:e=this.$t("label.no");break;case"POWER_SAVE_MODE":case 2:e=this.$t("label.yes")}return e},mapItemUserDefinedPropertiesGet(t,e){Object(u.lb)(t,e).then(t=>{let e=[{label:this.$t("label.manualInputParams"),value:0,type:0,key:"",keyVal:""}];t&&t.forEach(t=>{e.push({label:t.title,value:t.id,type:t.type,key:t.key,keyVal:t.key_val})}),this.$store.commit("mapItemUserDefinedPropertiesSet",e)})},async setExclusiveMode(){const t=!this.isLockedState;if(!this.isMoreThanUser)return void this.$notify({message:this.$t("text.insufficientPermissions"),timeout:3e3,type:"negative",position:"top"});if(!t&&!this.isLockedByMyself)return void this.$notify({message:this.$t("text.failCancelExclusive"),timeout:3e3,type:"negative",position:"top"});const[s]=await Object(ft.a)(this.$store.dispatch("srp/setExclusiveMode",t));s&&this.$notify({message:e.message,timeout:3e3,type:"negative",position:"top"}),this.$notify({message:t?this.$t("text.systemIsLockedByYou"):this.$t("text.exclusiveHasCanceld"),timeout:3e3,type:"positive",position:"top"})},async setRunSchedulingMode(t){this.isMoreThanUser&&!this.isLockedByOthers?this.isSchedulingModeMaintenance||3===t?this.$notify({message:this.$t("text.pleaseModifyVehicleStatusFromRearScreen"),timeout:3e3,type:"negative",position:"top"}):await m.d.setRobotRunSchedulingMode(t):this.$notify({message:this.$t("text.insufficientPermissions"),timeout:3e3,type:"warning",position:"top"})}},watch:{emergencyStateIsNone(t){t?null!==this.cancelEmergencyCallbackObject.resolve&&this.cancelEmergencyCallbackObject.resolve():null!==this.setEmergencyCallbackObject.resolve&&this.setEmergencyCallbackObject.resolve()},isMissionRunning(t,e){!t&&this.isConnected&&this.$notify({message:this.$t("text.missionFinished"),timeout:3e3,type:"positive",position:"top"})},isFactoryMode:{handler(t,e){var s;t?this.factoryModeNotify=this.$q.notify({message:this.$t("label.factoryMode"),timeout:0,type:"info",position:"top"}):null===(s=this.factoryModeNotify)||void 0===s||s.call(this)},immediate:!0},isLockedByOthers:{handler(t,e){var s,i;t?this.enableUserSystemControlNotifies.lockedByOthers=this.$q.notify({message:this.$t("text.lockedByOthersTip"),timeout:0,type:"info",position:"top",icon:"lock",iconColor:"black"}):null===(s=(i=this.enableUserSystemControlNotifies).lockedByOthers)||void 0===s||s.call(i)},immediate:!0},isSchedulingModeAuto:{handler(t,e){var s,i;t?this.enableUserSystemControlNotifies.schedulingModeAuto=this.$q.notify({message:this.$t("text.schedulingModeAutoTip"),timeout:0,type:"info",position:"top",icon:"language",iconColor:"green-5",classes:"white-space-pre-line"}):null===(s=(i=this.enableUserSystemControlNotifies).schedulingModeAuto)||void 0===s||s.call(i)},immediate:!0},isSchedulingModeMaintenance:{handler(t,e){var s,i;t?this.enableUserSystemControlNotifies.schedulingModeMaintenance=this.$q.notify({message:this.$t("text.schedulingModeMaintenanceTip"),timeout:0,type:"info",position:"top",classes:"white-space-pre-line"}):null===(s=(i=this.enableUserSystemControlNotifies).schedulingModeMaintenance)||void 0===s||s.call(i)},immediate:!0},isConnected(t,e){t?(this.isMobile||this.isEditMap||(this.rightDrawerOpen=!0),this.startPingNetwork()):(this.stopPingNetwork(),this.showReconnectModal=!0)},isLockedState(t,e){t&&this.isLockedByMyself?it.a.setLockedState(!0):it.a.setLockedState(!1)},leftDrawerOpen(t,e){this.$store.commit("setLeftDrawerState",t)},rightDrawerOpen(t,e){this.$store.commit("setRigthDrawerState",t)},isManualCtrlState(t,e){n.a.unmountKeyboardEvent(),t?["/manualcontrol","/homePage","/networkSignalStrengthCloudMap"].includes(this.$route.path)&&n.a.mountKeyboardEvent():n.a.stopSendCmd()},"$route.path"(t,e){n.a.unmountKeyboardEvent(),["/manualcontrol","/homePage","/networkSignalStrengthCloudMap"].includes(t)&&this.isManualCtrlState&&n.a.mountKeyboardEvent()}}},St=(i("fe7b"),i("4d5a")),wt=i("e359"),Nt=i("65c6"),$t=i("ead5"),It=i("079eb"),kt=i("4e73"),qt=i("58a8"),Ot=i("9404"),xt=i("09e3"),Ct=i("de5e"),Dt=i("7f67"),Tt=Object(_.a)(vt,function(){var t=this,e=t._self._c;return e("q-layout",{attrs:{view:"lHh LpR lFr"}},[t.isNotPartnerBeta?[e("q-header",{staticStyle:{height:"48px"}},[e("q-toolbar",{staticClass:"q-pr-none",staticStyle:{background:"#fafafa",height:"48px"},attrs:{glossy:"mat"===t.$q.theme,inverted:"ios"===t.$q.theme},nativeOn:{click:function(e){return t.gotoHomePage.apply(null,arguments)}}},[e("q-icon",{staticClass:"std_breadcrumbs_root"}),e("q-breadcrumbs",{staticStyle:{"font-size":"14px",color:"#5a5d74"},attrs:{separator:">",gutter:"sm","active-color":"grey-5"}},[e("q-breadcrumbs-el",{attrs:{label:"Matrix",icon:""}}),e("q-breadcrumbs-el",{class:"mapEdit"===t.$route.name?"text-red":"text-primary",attrs:{label:t.routerName,icon:""}}),t.subRouterName?e("q-breadcrumbs-el",{attrs:{label:t.subRouterName,icon:""}}):t._e()],1),e("q-space"),t.isSchedulingModeManual?e("q-btn",{class:t.isMobile?"q-mr-sm":"q-mr-md",attrs:{flat:"",dense:"",unelevated:"","no-caps":"",icon:t.isLockedState?"lock":"lock_open",color:"black"},on:{click:function(e){return e.stopPropagation(),t.setExclusiveMode.apply(null,arguments)}}},[e("q-tooltip",[t._v("\n            "+t._s(t.isLockedState?t.$t("label.operationExclusive"):t.$t("label.operationSharing"))+"\n          ")])],1):t._e(),t.isSchedulingModeMaintenance?e("q-btn",{class:t.isMobile?"q-mr-sm":"q-mr-md",attrs:{flat:"",dense:"",unelevated:"",color:"primary","no-caps":"",icon:"img:/statics/web_source/images/pages/mode_maintenance.svg",label:t.$t("label.maintenanceMode")},on:{click:function(e){return e.stopPropagation(),t.setRunSchedulingMode(3)}}}):e("q-btn",{class:t.isMobile?"q-mr-sm":"q-mr-md",attrs:{flat:"",dense:"",unelevated:"",color:"primary","no-caps":"",label:t.isSchedulingModeAuto?t.$t("label.autoMode"):t.$t("label.manualMode"),icon:t.isSchedulingModeAuto?"img:/statics/web_source/images/pages/mode_auto.svg":"img:/statics/web_source/images/pages/mode_manual.svg"},on:{click:function(t){return t.stopPropagation(),(()=>{}).apply(null,arguments)}}},[e("q-menu",{attrs:{self:"top middle"}},[e("q-list",[e("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:"",active:t.isSchedulingModeAuto},on:{click:function(e){return e.stopPropagation(),t.setRunSchedulingMode(2)}}},[e("q-item-section",{attrs:{avatar:""}},[e("q-icon",{attrs:{name:"img:/statics/web_source/images/pages/mode_auto.svg"}})],1),e("q-item-section",[t._v(t._s(t.$t("label.autoMode")))])],1),e("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:"",active:t.isSchedulingModeManual},on:{click:function(e){return e.stopPropagation(),t.setRunSchedulingMode(1)}}},[e("q-item-section",{attrs:{avatar:""}},[e("q-icon",{attrs:{name:"img:/statics/web_source/images/pages/mode_manual.svg"}})],1),e("q-item-section",[t._v(t._s(t.$t("label.manualMode")))])],1)],1)],1)],1),t.isConnected?e("div",[e("q-btn",{class:t.isMobile?"q-mr-sm":"q-mr-md",attrs:{flat:"",dense:"",unelevated:"","no-caps":""},on:{click:function(e){return t.stopPropagation(e)}}},[t.isMobile?e("q-icon",{class:t.networkStateIcon+" mobile_background_size"}):e("q-icon",{class:t.networkStateIcon+" icon_size_22"}),e("q-tooltip",[e("q-list",{staticStyle:{"min-width":"240px"},attrs:{separator:"",highlight:"",link:""}},[e("q-item",[e("q-item-section",[t._v(t._s(t.$t("label.networkDelay")))]),e("q-item-section",[t._v(t._s(t.networkPingValue+"ms")+" ")])],1),t.isWirelessNetworkCard?[e("q-item",[e("q-item-section",[t._v(t._s(t.$t("label.networkWireless")))]),e("q-item-section",[t._v(t._s(t.wlanText))])],1),"Connected"===t.networkWirelessInfo.wlan.State?[e("q-item",[e("q-item-section",[t._v(t._s(t.$t("label.signalStrength")))]),e("q-item-section",[t._v(t._s(t.networkWirelessInfo.wlan.RSSI))])],1),e("q-item",[e("q-item-section",[t._v(t._s(t.$t("label.networkBand")))]),e("q-item-section",[t._v(t._s(t.networkWirelessInfo.wlan.Band))])],1),e("q-item",[e("q-item-section",[t._v(t._s(t.$t("label.DataFlow")))]),e("q-item-section",[t._v(t._s(t.networkWirelessInfo.wlan.Bytes+" mb"))])],1)]:t._e(),e("q-item",[e("q-item-section",[t._v(t._s(t.$t("label.mobileHotSpot")))]),e("q-item-section",[t._v(t._s(t.apText))])],1),"Link up"===t.networkWirelessInfo.ap.State?[e("q-item",[e("q-item-section",[t._v(t._s(t.$t("label.networkBand")))]),e("q-item-section",[t._v(t._s(t.networkWirelessInfo.ap.Band))])],1),e("q-item",[e("q-item-section",[t._v(t._s(t.$t("label.mobileHotSpotPassword")))]),e("q-item-section",[t._v(t._s(t.networkWirelessInfo.ap.Passphrase))])],1)]:t._e(),e("q-item",[e("q-item-section",[t._v(t._s(t.$t("label.networkSpeed")))]),e("q-item-section",[t._v(t._s(t.networkWirelessInfo.speed+" mb/s"))])],1)]:t._e()],2)],1)],1),e("q-btn",{class:t.isMobile?"q-mr-sm":"q-mr-md",attrs:{flat:"",dense:"",unelevated:"","no-caps":""},on:{click:function(e){return t.stopPropagation(e)}}},["visible"===t.documentVisibility?[t.isMobile?e("q-icon",{class:t.batteryIcon+" mobile_background_size"}):e("q-icon",{class:t.batteryIcon+" icon_size_26x20"})]:[e("div",{staticClass:"title_style"},[t._v(t._s(t.batteryPercentage+"%"))])],e("q-tooltip",[e("q-list",{attrs:{separator:"",link:""}},t._l(t.batteryState.items,function(s){return!1!==s.isVisible?e("q-item",{key:s.name,attrs:{dense:"",highlight:""}},[e("q-item-section",[e("q-item-label",{staticClass:"text_small_white_style"},[t._v(t._s(s.name))])],1),e("q-item-section",{attrs:{side:""}},[e("q-item-label",{staticClass:"text_small_white_style"},[t._v(t._s(s.value+s.units))])],1)],1):t._e()}),1)],1)],2),e("q-btn",{class:t.isMobile?"q-mr-sm":"q-mr-md",attrs:{flat:"",dense:"",unelevated:"","no-caps":""},on:{click:function(e){return t.stopPropagation(e)}}},[t.isMobile?e("q-icon",{staticClass:"icon_size_16"},[e("div",{class:(t.isBreakSwitchOpened?"std_brake_switch_off":"std_brake_switch_on")+" mobile_background_size"})]):e("q-icon",{class:(t.isBreakSwitchOpened?"std_brake_switch_off":"std_brake_switch_on")+" icon_size_22"}),e("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle","content-class":"tooltip_style"}},[t._v("\n              "+t._s(t.$t("text.breakSwitchInfo"))+"\n            ")])],1),e("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",dense:"",unelevated:"","no-caps":""},on:{click:function(e){return t.toggleFullscreen(e)}}},[t.isMobile?e("q-icon",{staticClass:"icon_size_16"},[e("div",{class:(t.$q.fullscreen.isActive?"std_normal_screen":"std_full_screen")+" mobile_background_size"})]):e("q-icon",{class:(t.$q.fullscreen.isActive?"std_normal_screen":"std_full_screen")+" icon_size_22"}),e("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle","content-class":"tooltip_style"}},[t._v("\n              "+t._s(t.$q.fullscreen.isActive?t.$t("button.normalScreen"):t.$t("button.fullScreen"))+"\n            ")])],1),e("q-btn",{staticClass:"q-mr-md",attrs:{flat:"",dense:"",unelevated:"","no-caps":"",round:"",color:t.faultStyle,icon:"mdi-message-text-outline",size:t.isMobile?"12px":""},on:{click:function(e){return t.showFaultDialog(e)}}},[e("q-badge",{attrs:{color:t.faultStyle,floating:""}},[t._v(t._s(t.faults.length))]),e("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle","content-class":"tooltip_style"}},[t._v("\n              "+t._s(t.$t("label.notificationCenter"))+"\n            ")])],1),e("q-btn",{class:t.isMobile?"":"q-mr-sm",attrs:{flat:"",dense:"",unelevated:"","no-caps":""},on:{click:function(e){return t.openCtxMenu(e)}}},[e("label",{staticClass:"q-mr-sm text_main_grey_style"},[t._v(t._s(t.currentUserName))]),e("q-icon",{staticClass:"std_expand"}),e("context-menu",{ref:"ctxMenu",attrs:{"is-context-menu":!1}})],1),t.emergencyStateIsNone?e("q-btn",{attrs:{flat:"",dense:"",unelevated:"","no-caps":""},on:{click:t.setEmergency}},[e("q-icon",{staticClass:"std_normal_state icon_size_48"}),e("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle","content-class":"tooltip_style"}},[t._v("\n              "+t._s(t.$t("button.emergencyStop"))+"\n            ")])],1):e("q-btn",{attrs:{flat:"",dense:"",unelevated:"","no-caps":""},on:{click:t.cancelEmergencyState}},[e("q-icon",{staticClass:"std_emergency_state icon_size_48"}),e("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle","content-class":"tooltip_style"}},[t._v("\n              "+t._s(t.$t("button.cancelEmergency"))+"\n            ")])],1)],1):t._e()],1)],1),t.isConnected?e("q-drawer",{attrs:{overlay:(t.isMobile,!1),breakpoint:1,"content-class":"mat"===t.$q.theme?"bg-grey-2":null,width:t.isLeftDrawSimplified?48:180},model:{value:t.leftDrawerOpen,callback:function(e){t.leftDrawerOpen=e},expression:"leftDrawerOpen"}},[e("main-menu",{ref:"mainMenuRef",attrs:{simplified:t.isLeftDrawSimplified},on:{changeState:function(e){t.isLeftDrawSimplified=!t.isLeftDrawSimplified}}})],1):t._e()]:t._e(),e("q-page-container",[e("keep-alive",{attrs:{include:t.cachedComponents}},[e("router-view",{key:t.$route.path})],1),e("loading-dialog",{ref:"loadingDlg"})],1),t.isConnected&&!t.isEditMap?e("q-drawer",{attrs:{side:"right",overlay:!1,width:280,"content-class":"mat"===t.$q.theme?"bg-grey-2":null},model:{value:t.rightDrawerOpen,callback:function(e){t.rightDrawerOpen=e},expression:"rightDrawerOpen"}},[e("right-drawer",{staticStyle:{position:"absolute",top:"0px",right:"0px",width:"100%"},on:{closeDrawer:t.onCloseRightDrawer}})],1):t._e(),t.rightDrawerOpen?t._e():e("q-page-sticky",{attrs:{position:"bottom-right",offset:[16,8]}},[e("q-btn",{staticClass:"no-shadow",attrs:{round:"",unelevated:"","no-caps":"",outline:"",color:"transparent"},on:{click:function(e){t.rightDrawerOpen=!0}}},[e("q-icon",{staticClass:"std_arrow_left icon_size_16x22"})],1)],1),e("message-dialog",{ref:"messageDlg"}),e("input-dialog",{ref:"inputDlg"}),e("question-dialog",{ref:"questionDlg"}),e("select-dialog",{ref:"selectDlg"}),e("fault-dialog",{ref:"faultDlg"}),e("reconnect-modal",{staticStyle:{opacity:"0.8"},attrs:{opened:t.showReconnectModal},on:{"update:opened":function(e){t.showReconnectModal=e}}}),e("release-remind",{ref:"refReleaseRemind"})],2)},[],!1,null,null,null);s.default=Tt.exports;$()(Tt,"components",{QLayout:St.a,QHeader:wt.a,QToolbar:Nt.a,QIcon:O.a,QBreadcrumbs:$t.a,QBreadcrumbsEl:It.a,QSpace:F.a,QBtn:w.a,QTooltip:x.a,QMenu:kt.a,QList:A.a,QItem:L.a,QItemSection:z.a,QItemLabel:j.a,QSeparator:P.a,QBadge:qt.a,QDrawer:Ot.a,QPageContainer:xt.a,QPageSticky:Ct.a}),$()(Tt,"directives",{ClosePopup:Dt.a})},ae6a:function(t,e,s){},fe7b:function(t,e,s){"use strict";s("ae6a")}}]);