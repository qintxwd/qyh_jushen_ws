# ============================================================
# JAKA Zu7 åŒè‡‚ VR é¥æ“ - å·¥ä¸šçº§ä¼˜åŒ–å‚æ•°
# åŸºäº TracIK + Servo åˆ†ç¦»æ¶æ„
# ============================================================

velocity_control:
  dt: 0.008  # 125Hz ä¼ºæœå‘¨æœŸ
  
  # ğŸ¯ Servo å±‚å‚æ•°ï¼ˆå…³é”®ï¼šJAKA ç¨³å®šæ€§ï¼‰
  servo_kp: 0.4              # Pæ§åˆ¶å¢ç›Šï¼ˆé™ä½é¿å…éœ‡è¡ï¼Œä»5.0â†’0.4ï¼‰
  joint_vel_limit: 0.6       # å…³èŠ‚é€Ÿåº¦é™åˆ¶ rad/sï¼ˆä»1.5â†’0.6ï¼Œé¿å…JAKAæŠ¥è­¦ï¼‰
  max_delta_q: 0.02          # å•æ­¥æœ€å¤§å¢é‡ radï¼ˆçº¦1.15Â°ï¼Œé˜²æ­¢ä¼ºæœå¼‚å¸¸ï¼‰
  q_dot_min: 0.005           # é€Ÿåº¦æ­»åŒº rad/sï¼ˆä»0.0001â†’0.005ï¼Œå‡å°‘å¾®æŠ–ï¼‰
  
  # IK å±‚å‚æ•°
  max_linear_vel: 0.5        # æœ«ç«¯æœ€å¤§çº¿é€Ÿåº¦ m/s
  max_angular_vel: 1.0       # æœ«ç«¯æœ€å¤§è§’é€Ÿåº¦ rad/s
  linear_gain: 2.0           # ä½ç½®è¯¯å·®å¢ç›Š
  angular_gain: 1.0          # å§¿æ€è¯¯å·®å¢ç›Š
  
  # è¯¯å·®æ­»åŒºï¼ˆé˜²æ­¢ç›®æ ‡é™„è¿‘æŠ–åŠ¨ï¼‰
  position_deadzone: 0.001   # ä½ç½®è¯¯å·®æ­»åŒº 1mm
  orientation_deadzone: 0.017 # å§¿æ€è¯¯å·®æ­»åŒº ~1Â°
  
  # VR ç›®æ ‡å˜åŒ–é˜ˆå€¼ï¼ˆè¿‡æ»¤æ‰‹æŸ„æŠ–åŠ¨ï¼‰
  target_change_position_threshold: 0.002   # 2mm
  target_change_orientation_threshold: 0.035 # ~2Â°
  
  # å¥‡å¼‚å€¼é˜»å°¼ï¼ˆJacobian ä¼ªé€†ï¼Œå·²å¼ƒç”¨ä½†ä¿ç•™é…ç½®ï¼‰
  lambda_min: 0.0001
  
  # å…³èŠ‚é™ä½ï¼ˆradï¼Œä» JAKA_ZU7_LIMITS åº”ç”¨ 5Â° å®‰å…¨è£•åº¦ï¼‰
  joint_pos_min: [-6.196, -1.746, -6.196, -2.444, -6.196, -1.746, -6.196]
  joint_pos_max: [ 6.196,  1.746,  6.196,  0.437,  6.196,  1.746,  6.196]

# ============================================================
# ğŸ”§ å‚æ•°è°ƒè¯•æŒ‡å—
# ============================================================
# 
# å¦‚æœå‡ºç°æŠ–åŠ¨ï¼š
#   1. é™ä½ servo_kpï¼ˆ0.4 â†’ 0.3ï¼‰
#   2. å¢å¤§ q_dot_minï¼ˆ0.005 â†’ 0.008ï¼‰
#   3. é™ä½ joint_vel_limitï¼ˆ0.6 â†’ 0.5ï¼‰
#
# å¦‚æœè·Ÿéšå¤ªæ…¢ï¼š
#   1. æé«˜ servo_kpï¼ˆ0.4 â†’ 0.6ï¼‰
#   2. æé«˜ max_linear_velï¼ˆ0.5 â†’ 0.8ï¼‰
#
# å¦‚æœ JAKA æŠ¥"è½¨è¿¹å¼‚å¸¸"ï¼š
#   1. é™ä½ max_delta_qï¼ˆ0.02 â†’ 0.015ï¼‰
#   2. é™ä½ joint_vel_limitï¼ˆ0.6 â†’ 0.5ï¼‰
#   3. æ£€æŸ¥ VR ç›®æ ‡è·³å˜ï¼ˆtarget_change_*_thresholdï¼‰
#
# å¦‚æœ IK é¢‘ç¹å¤±è´¥ï¼š
#   1. æ£€æŸ¥å·¥ä½œç©ºé—´ï¼ˆæ˜¯å¦è¶…å‡ºæœºæ¢°è‡‚æé™ï¼‰
#   2. å¢å¤§ target_change_position_thresholdï¼ˆè¿‡æ»¤å¤§è·³å˜ï¼‰
#   3. TracIK timeout åœ¨ä»£ç ä¸­å›ºå®š 10msï¼ˆåˆç†ï¼‰
#
# ============================================================
