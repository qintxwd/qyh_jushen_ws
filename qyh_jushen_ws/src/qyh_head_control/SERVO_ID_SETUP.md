# èˆµæœºIDè®¾ç½®æŒ‡å—

## ä¸ºä»€ä¹ˆéœ€è¦è®¾ç½®èˆµæœºIDï¼Ÿ

HTD-85Hèˆµæœºå‡ºå‚é»˜è®¤IDéƒ½æ˜¯ **1**ï¼Œä½†å¤´éƒ¨æ§åˆ¶éœ€è¦ä¸¤ä¸ªèˆµæœºï¼š
- **Panèˆµæœº** (å·¦å³è½¬åŠ¨): ID = 1
- **Tiltèˆµæœº** (ä¸Šä¸‹è½¬åŠ¨): ID = 2

å¦‚æœä¸¤ä¸ªèˆµæœºIDç›¸åŒï¼Œæ§åˆ¶å™¨æ— æ³•åŒºåˆ†å®ƒä»¬ï¼Œå¿…é¡»ä¿®æ”¹å…¶ä¸­ä¸€ä¸ªã€‚

## ğŸ”§ æ–¹æ³•ä¸€ï¼šäº¤äº’å¼è®¾ç½®ï¼ˆæ¨èï¼‰

### æ­¥éª¤1ï¼šå•ç‹¬è¿æ¥ç¬¬ä¸€ä¸ªèˆµæœºï¼ˆPan - å·¦å³è½¬åŠ¨ï¼‰

```bash
# 1. åªè¿æ¥Panèˆµæœºåˆ°æ§åˆ¶æ¿
# 2. è¿è¡Œäº¤äº’å¼å·¥å…·
cd ~/qyh_jushen_ws/qyh_jushen_ws
source install/setup.bash
ros2 run qyh_head_control set_servo_id

# 3. é€‰æ‹©é€‰é¡¹ 1ï¼Œç¡®è®¤è®¾ç½®ä¸ºID=1
```

**æ“ä½œæµç¨‹ï¼š**
```
========================================================
        HTD-85H èˆµæœºIDè®¾ç½®å·¥å…·
========================================================

æ­£åœ¨æ‰«æèˆµæœº...
  âœ“ å‘ç°èˆµæœº ID=1: ä½ç½®=500, ç”µå‹=7500mV, æ¸©åº¦=35â„ƒ

========================================================
è¯·é€‰æ‹©æ“ä½œ:
  1 - è®¾ç½®èˆµæœºIDä¸º 1 (Panå·¦å³è½¬åŠ¨)
  2 - è®¾ç½®èˆµæœºIDä¸º 2 (Tiltä¸Šä¸‹è½¬åŠ¨)
  3 - è‡ªå®šä¹‰IDè®¾ç½®
  q - é€€å‡º
========================================================

è¯·è¾“å…¥é€‰é¡¹ (1/2/3/q): 1

âš ï¸  é‡è¦æç¤º:
  - ç¡®ä¿è¿™æ˜¯è¦è®¾ç½®ä¸ºPan(å·¦å³è½¬åŠ¨)çš„èˆµæœº
  - ç¡®ä¿åªè¿æ¥äº†è¿™ä¸€ä¸ªèˆµæœº
  ç¡®è®¤è®¾ç½®ä¸ºID=1? (y/n): y

æ­£åœ¨å°†èˆµæœºIDä» 1 ä¿®æ”¹ä¸º 1...
  å½“å‰èˆµæœºä½ç½®: 500
  âœ“ æˆåŠŸï¼èˆµæœºIDå·²ä¿®æ”¹ä¸º 1

âœ“ PanèˆµæœºIDè®¾ç½®å®Œæˆï¼
  è¯·æ–­å¼€è¿™ä¸ªèˆµæœºï¼Œè¿æ¥ä¸‹ä¸€ä¸ªèˆµæœº
```

### æ­¥éª¤2ï¼šæ–­å¼€ç¬¬ä¸€ä¸ªèˆµæœºï¼Œè¿æ¥ç¬¬äºŒä¸ªèˆµæœºï¼ˆTilt - ä¸Šä¸‹è½¬åŠ¨ï¼‰

```bash
# 1. æ–­å¼€Panèˆµæœºçš„è¿æ¥
# 2. è¿æ¥Tiltèˆµæœºåˆ°æ§åˆ¶æ¿
# 3. å†æ¬¡è¿è¡Œå·¥å…·
ros2 run qyh_head_control set_servo_id

# 4. é€‰æ‹©é€‰é¡¹ 2ï¼Œç¡®è®¤è®¾ç½®ä¸ºID=2
```

**æ“ä½œæµç¨‹ï¼š**
```
æ­£åœ¨æ‰«æèˆµæœº...
  âœ“ å‘ç°èˆµæœº ID=1: ä½ç½®=500, ç”µå‹=7500mV, æ¸©åº¦=35â„ƒ

è¯·è¾“å…¥é€‰é¡¹ (1/2/3/q): 2

âš ï¸  é‡è¦æç¤º:
  - ç¡®ä¿è¿™æ˜¯è¦è®¾ç½®ä¸ºTilt(ä¸Šä¸‹è½¬åŠ¨)çš„èˆµæœº
  - ç¡®ä¿åªè¿æ¥äº†è¿™ä¸€ä¸ªèˆµæœº
  - å¦‚æœä¸¤ä¸ªèˆµæœºéƒ½æ˜¯ID=1ï¼Œå¿…é¡»å…ˆæ–­å¼€ç¬¬ä¸€ä¸ªèˆµæœº
  ç¡®è®¤è®¾ç½®ä¸ºID=2? (y/n): y

æ­£åœ¨å°†èˆµæœºIDä» 1 ä¿®æ”¹ä¸º 2...
  âœ“ æˆåŠŸï¼èˆµæœºIDå·²ä¿®æ”¹ä¸º 2

âœ“ TiltèˆµæœºIDè®¾ç½®å®Œæˆï¼
  ç°åœ¨å¯ä»¥è¿æ¥ä¸¤ä¸ªèˆµæœºä¸€èµ·ä½¿ç”¨äº†
```

### æ­¥éª¤3ï¼šè¿æ¥ä¸¤ä¸ªèˆµæœºæµ‹è¯•

```bash
# 1. åŒæ—¶è¿æ¥ä¸¤ä¸ªèˆµæœº
# 2. éªŒè¯IDè®¾ç½®
ros2 run qyh_head_control set_servo_id

# åº”è¯¥çœ‹åˆ°ï¼š
#   âœ“ å‘ç°èˆµæœº ID=1: ä½ç½®=500
#   âœ“ å‘ç°èˆµæœº ID=2: ä½ç½®=500

# 3. å¯åŠ¨æ§åˆ¶èŠ‚ç‚¹
ros2 launch qyh_head_control head_control.launch.py
```

---

## ğŸš€ æ–¹æ³•äºŒï¼šä½¿ç”¨Launchæ–‡ä»¶æ‰¹é‡è®¾ç½®

### å‰ææ¡ä»¶
âš ï¸ **å¿…é¡»æ¯æ¬¡åªè¿æ¥ä¸€ä¸ªèˆµæœºï¼**

### è®¾ç½®Tiltèˆµæœºä¸ºID=2

```bash
# 1. åªè¿æ¥Tiltèˆµæœº
# 2. è¿è¡Œlaunchæ–‡ä»¶
cd ~/qyh_jushen_ws/qyh_jushen_ws
source install/setup.bash

ros2 launch qyh_head_control set_servo_id.launch.py old_id:=1 new_id:=2
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
æ‰¹å¤„ç†æ¨¡å¼ï¼šå°†èˆµæœºIDä» 1 ä¿®æ”¹ä¸º 2

æ­£åœ¨æ‰«æèˆµæœº...
  âœ“ å‘ç°èˆµæœº ID=1: ä½ç½®=500, ç”µå‹=7500mV, æ¸©åº¦=35â„ƒ

æ­£åœ¨å°†èˆµæœºIDä» 1 ä¿®æ”¹ä¸º 2...
  å½“å‰èˆµæœºä½ç½®: 500
  âœ“ æˆåŠŸï¼èˆµæœºIDå·²ä¿®æ”¹ä¸º 2
  éªŒè¯ä½ç½®: 500

âœ“ èˆµæœºIDè®¾ç½®æˆåŠŸ: 1 -> 2
```

### è‡ªå®šä¹‰å‚æ•°

```bash
# è®¾ç½®ä¸åŒçš„ä¸²å£
ros2 launch qyh_head_control set_servo_id.launch.py \
    serial_port:=/dev/ttyUSB0 \
    old_id:=1 \
    new_id:=3

# è®¾ç½®ä¸åŒçš„æ³¢ç‰¹ç‡
ros2 launch qyh_head_control set_servo_id.launch.py \
    baudrate:=9600 \
    old_id:=1 \
    new_id:=2
```

---

## ğŸ“‹ å®Œæ•´è®¾ç½®æµç¨‹æ€»ç»“

### ç‰©ç†è¿æ¥æ­¥éª¤

```
1ï¸âƒ£ ç¬¬ä¸€ä¸ªèˆµæœºï¼ˆPan - å·¦å³è½¬åŠ¨ï¼‰
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ 1. å•ç‹¬è¿æ¥åˆ°æ§åˆ¶æ¿                  â”‚
   â”‚ 2. ç¡®è®¤ID=1ï¼ˆå‡ºå‚é»˜è®¤ï¼‰æˆ–è®¾ç½®ä¸ºID=1   â”‚
   â”‚ 3. æ–­å¼€è¿æ¥                          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2ï¸âƒ£ ç¬¬äºŒä¸ªèˆµæœºï¼ˆTilt - ä¸Šä¸‹è½¬åŠ¨ï¼‰
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ 1. å•ç‹¬è¿æ¥åˆ°æ§åˆ¶æ¿                  â”‚
   â”‚ 2. å°†IDä»1ä¿®æ”¹ä¸º2                    â”‚
   â”‚ 3. æ–­å¼€è¿æ¥                          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3ï¸âƒ£ åŒæ—¶è¿æ¥ä¸¤ä¸ªèˆµæœº
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ 1. è¿æ¥Panèˆµæœºï¼ˆID=1ï¼‰                â”‚
   â”‚ 2. è¿æ¥Tiltèˆµæœºï¼ˆID=2ï¼‰               â”‚
   â”‚ 3. æµ‹è¯•æ§åˆ¶                          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å‘½ä»¤è¡Œæ­¥éª¤

```bash
# ========== æ­¥éª¤1: è®¾ç½®Panèˆµæœºï¼ˆå¯é€‰ï¼Œå¦‚æœå·²ç»æ˜¯ID=1å¯è·³è¿‡ï¼‰==========
# åªè¿æ¥Panèˆµæœº
ros2 run qyh_head_control set_servo_id
# é€‰æ‹©é€‰é¡¹1ï¼Œè®¾ç½®ä¸ºID=1

# ========== æ­¥éª¤2: è®¾ç½®Tiltèˆµæœº ==========
# æ–­å¼€Panèˆµæœºï¼Œåªè¿æ¥Tiltèˆµæœº
ros2 run qyh_head_control set_servo_id
# é€‰æ‹©é€‰é¡¹2ï¼Œè®¾ç½®ä¸ºID=2

# æˆ–ä½¿ç”¨launchæ–‡ä»¶
ros2 launch qyh_head_control set_servo_id.launch.py old_id:=1 new_id:=2

# ========== æ­¥éª¤3: éªŒè¯è®¾ç½® ==========
# åŒæ—¶è¿æ¥ä¸¤ä¸ªèˆµæœº
ros2 run qyh_head_control set_servo_id
# åº”è¯¥çœ‹åˆ°ID=1å’ŒID=2ä¸¤ä¸ªèˆµæœº

# ========== æ­¥éª¤4: å¯åŠ¨æ§åˆ¶ ==========
ros2 launch qyh_head_control head_control.launch.py
```

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆå¿…é¡»å•ç‹¬è¿æ¥èˆµæœºï¼Ÿ

**åŸå› **ï¼šå¦‚æœä¸¤ä¸ªèˆµæœºIDéƒ½æ˜¯1ï¼Œæ§åˆ¶å™¨å‘é€"ä¿®æ”¹ID=1"çš„å‘½ä»¤æ—¶ï¼Œä¸¤ä¸ªèˆµæœºéƒ½ä¼šå“åº”ï¼Œå¯¼è‡´å†²çªã€‚

**è§£å†³**ï¼šæ¯æ¬¡åªè¿æ¥ä¸€ä¸ªèˆµæœºè¿›è¡ŒIDè®¾ç½®ã€‚

### Q2: å¦‚ä½•ç¡®è®¤èˆµæœºIDå·²æˆåŠŸä¿®æ”¹ï¼Ÿ

```bash
# æ–¹æ³•1: ä½¿ç”¨å·¥å…·æ‰«æ
ros2 run qyh_head_control set_servo_id
# æŸ¥çœ‹"å‘ç°èˆµæœº ID=X"çš„è¾“å‡º

# æ–¹æ³•2: ä½¿ç”¨åŸå§‹SDKè„šæœ¬
cd ~/qyh_jushen_ws/èµ„æ–™/å¤´éƒ¨ç”µæœº/06\ Jetson\ Nanoç‰ˆæœ¬/ç¨‹åºæ–‡ä»¶/æ¡ˆä¾‹1\ è·å–æ€»çº¿èˆµæœºä¿¡æ¯/
python3 serial_servo_status.py
```

### Q3: ä¸²å£æƒé™é”™è¯¯

```bash
# é”™è¯¯ä¿¡æ¯: Permission denied: '/dev/ttyTHS1'

# ä¸´æ—¶è§£å†³
sudo chmod 666 /dev/ttyTHS1

# æ°¸ä¹…è§£å†³
sudo usermod -aG dialout $USER
# é‡æ–°ç™»å½•ç³»ç»Ÿ
```

### Q4: æ‰¾ä¸åˆ°èˆµæœº

**æ£€æŸ¥æ¸…å•**ï¼š
1. âœ… èˆµæœºæ˜¯å¦ä¾›ç”µ (6-12V)
2. âœ… ä¸²å£è¿æ¥æ˜¯å¦æ­£ç¡®
3. âœ… åªè¿æ¥äº†ä¸€ä¸ªèˆµæœº
4. âœ… æ§åˆ¶æ¿Type-Cæ¥å£è¿æ¥åˆ°Jetson

### Q5: è®¾ç½®å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

```bash
# 1. æ£€æŸ¥èˆµæœºä¾›ç”µå’Œè¿æ¥
# 2. å°è¯•æ‰‹åŠ¨æŒ‡å®šID
ros2 run qyh_head_control set_servo_id
# é€‰æ‹©é€‰é¡¹3ï¼ˆè‡ªå®šä¹‰IDè®¾ç½®ï¼‰

# 3. ä½¿ç”¨åŸå§‹SDKå·¥å…·
cd ~/qyh_jushen_ws/èµ„æ–™/å¤´éƒ¨ç”µæœº/06\ Jetson\ Nanoç‰ˆæœ¬/ç¨‹åºæ–‡ä»¶/æ¡ˆä¾‹2\ æ€»çº¿èˆµæœºIDè®¾ç½®/
python3 set_serial_servo_status.py
```

---

## ğŸ¯ å¿«é€Ÿå‚è€ƒå¡

| æ“ä½œ | å‘½ä»¤ |
|------|------|
| äº¤äº’å¼è®¾ç½® | `ros2 run qyh_head_control set_servo_id` |
| æ‰¹é‡è®¾ç½®ID=2 | `ros2 launch qyh_head_control set_servo_id.launch.py old_id:=1 new_id:=2` |
| æ‰«æèˆµæœº | `ros2 run qyh_head_control set_servo_id` ç„¶åé€€å‡º(q) |
| ä¸²å£æƒé™ | `sudo chmod 666 /dev/ttyTHS1` |
| å¯åŠ¨æ§åˆ¶ | `ros2 launch qyh_head_control head_control.launch.py` |

---

## ğŸ“ å¤‡æ³¨

- IDä¿®æ”¹åä¼šç«‹å³ç”Ÿæ•ˆï¼Œæ— éœ€é‡å¯èˆµæœº
- IDè®¾ç½®ä¼šä¿å­˜åœ¨èˆµæœºå†…éƒ¨ï¼Œæ–­ç”µåä¸ä¼šä¸¢å¤±
- å»ºè®®åœ¨èˆµæœºä¸Šè´´æ ‡ç­¾æ ‡æ³¨IDï¼Œé¿å…æ··æ·†
- Panèˆµæœºå»ºè®®è´´ "ID=1 å·¦å³" æ ‡ç­¾
- Tiltèˆµæœºå»ºè®®è´´ "ID=2 ä¸Šä¸‹" æ ‡ç­¾

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- ä¸»æ–‡æ¡£: [README.md](README.md)
- å‚æ•°é…ç½®: [config/head_params.yaml](config/head_params.yaml)
- SDKæ–‡æ¡£: `èµ„æ–™/å¤´éƒ¨ç”µæœº/readme_jetson.md`
